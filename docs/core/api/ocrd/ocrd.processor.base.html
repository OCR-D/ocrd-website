<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ocrd.processor.base module &#8212; ocrd 2.68.0
 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=12dfc556" />
    <script src="../../_static/documentation_options.js?v=2388e03a"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/ocrd-custom.js?v=285d69d9"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ocrd.processor.helpers module" href="ocrd.processor.helpers.html" />
    <link rel="prev" title="ocrd.processor.builtin.dummy_processor module" href="ocrd.processor.builtin.dummy_processor.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  
    <link rel="canonical" href="https://ocr-d.deapi/ocrd/ocrd.processor.base.html" />
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-ocrd.processor.base">
<span id="ocrd-processor-base-module"></span><h1>ocrd.processor.base module<a class="headerlink" href="#module-ocrd.processor.base" title="Link to this heading">¶</a></h1>
<p>Processor base class and helper functions.</p>
<dl class="py class">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ocrd.processor.base.</span></span><span class="sig-name descname"><span class="pre">Processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">workspace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="ocrd.workspace.html#ocrd.workspace.Workspace" title="ocrd.workspace.Workspace"><span class="pre">Workspace</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ocrd_tool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_file_grp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file_grp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolve_resource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_resource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_resources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_help</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subcommand</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dump_json</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dump_module_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/base.html#Processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.Processor" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A processor is a tool that implements the uniform OCR-D command-line interface
for run-time data processing. That is, it executes a single workflow step,
or a combination of workflow steps, on the workspace (represented by local METS).
It reads input files for all or requested physical pages of the input fileGrp(s),
and writes output files for them into the output fileGrp(s). It may take
a number of optional or mandatory parameters.</p>
<p>Instantiate, but do not process. Unless <code class="docutils literal notranslate"><span class="pre">list_resources</span></code> or
<code class="docutils literal notranslate"><span class="pre">show_resource</span></code> or <code class="docutils literal notranslate"><span class="pre">show_help</span></code> or <code class="docutils literal notranslate"><span class="pre">show_version</span></code> or
<code class="docutils literal notranslate"><span class="pre">dump_json</span></code> or <code class="docutils literal notranslate"><span class="pre">dump_module_dir</span></code> is true, setup for processing
(parsing and validating parameters, entering the workspace directory).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>workspace</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Workspace</span></code>) – The workspace to process.                  Can be <code class="docutils literal notranslate"><span class="pre">None</span></code> even for processing (esp. on multiple workspaces),                  but then needs to be set before running.</p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ocrd_tool</strong> (<em>string</em>) – JSON of the ocrd-tool description for that processor.                  Can be <code class="docutils literal notranslate"><span class="pre">None</span></code> for processing, but needs to be set before running.</p></li>
<li><p><strong>parameter</strong> (<em>string</em>) – JSON of the runtime choices for ocrd-tool <code class="docutils literal notranslate"><span class="pre">parameters</span></code>.                  Can be <code class="docutils literal notranslate"><span class="pre">None</span></code> even for processing, but then needs to be set before running.</p></li>
<li><p><strong>input_file_grp</strong> (<em>string</em>) – comma-separated list of METS <a href="#id1"><span class="problematic" id="id2">``</span></a>fileGrp``s used for input.</p></li>
<li><p><strong>output_file_grp</strong> (<em>string</em>) – comma-separated list of METS <a href="#id3"><span class="problematic" id="id4">``</span></a>fileGrp``s used for output.</p></li>
<li><p><strong>page_id</strong> (<em>string</em>) – comma-separated list of METS physical <code class="docutils literal notranslate"><span class="pre">page</span></code> IDs to process                  (or empty for all pages).</p></li>
<li><p><strong>resolve_resource</strong> (<em>string</em>) – If not <code class="docutils literal notranslate"><span class="pre">None</span></code>, then instead of processing, resolve                  given resource by name and print its full path to stdout.</p></li>
<li><p><strong>show_resource</strong> (<em>string</em>) – If not <code class="docutils literal notranslate"><span class="pre">None</span></code>, then instead of processing, resolve                  given resource by name and print its contents to stdout.</p></li>
<li><p><strong>list_resources</strong> (<em>boolean</em>) – If true, then instead of processing, find all installed                  resource files in the search paths and print their path names.</p></li>
<li><p><strong>show_help</strong> (<em>boolean</em>) – If true, then instead of processing, print a usage description                  including the standard CLI and all of this processor’s ocrd-tool parameters and                  docstrings.</p></li>
<li><p><strong>subcommand</strong> (<em>string</em>) – ‘worker’ or ‘server’, only used here for the right –help output</p></li>
<li><p><strong>show_version</strong> (<em>boolean</em>) – If true, then instead of processing, print information on                  this processor’s version and OCR-D version. Exit afterwards.</p></li>
<li><p><strong>dump_json</strong> (<em>boolean</em>) – If true, then instead of processing, print <code class="xref py py-attr docutils literal notranslate"><span class="pre">ocrd_tool</span></code>                  on stdout.</p></li>
<li><p><strong>dump_module_dir</strong> (<em>boolean</em>) – If true, then instead of processing, print <a class="reference internal" href="#ocrd.processor.base.Processor.moduledir" title="ocrd.processor.base.Processor.moduledir"><code class="xref py py-attr docutils literal notranslate"><span class="pre">moduledir</span></code></a>                  on stdout.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.show_help">
<span class="sig-name descname"><span class="pre">show_help</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subcommand</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/base.html#Processor.show_help"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.Processor.show_help" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.show_version">
<span class="sig-name descname"><span class="pre">show_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/base.html#Processor.show_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.Processor.show_version" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.verify">
<span class="sig-name descname"><span class="pre">verify</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/base.html#Processor.verify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.Processor.verify" title="Link to this definition">¶</a></dt>
<dd><p>Verify that the <code class="xref py py-attr docutils literal notranslate"><span class="pre">input_file_grp</span></code> fulfills the processor’s requirements.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.process">
<span class="sig-name descname"><span class="pre">process</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/ocrd/processor/base.html#Processor.process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.Processor.process" title="Link to this definition">¶</a></dt>
<dd><p>Process the <code class="xref py py-attr docutils literal notranslate"><span class="pre">workspace</span></code>
from the given <code class="xref py py-attr docutils literal notranslate"><span class="pre">input_file_grp</span></code>
to the given <code class="xref py py-attr docutils literal notranslate"><span class="pre">output_file_grp</span></code>
for the given <code class="xref py py-attr docutils literal notranslate"><span class="pre">page_id</span></code>
under the given <code class="xref py py-attr docutils literal notranslate"><span class="pre">parameter</span></code>.</p>
<p>(This contains the main functionality and needs to be overridden by subclasses.)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.add_metadata">
<span class="sig-name descname"><span class="pre">add_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pcgts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/base.html#Processor.add_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.Processor.add_metadata" title="Link to this definition">¶</a></dt>
<dd><p>Add PAGE-XML <a class="reference internal" href="../ocrd_models/ocrd_models.ocrd_page.html#ocrd_models.ocrd_page.MetadataItemType" title="ocrd_models.ocrd_page.MetadataItemType"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetadataItemType</span></code></a> <code class="docutils literal notranslate"><span class="pre">MetadataItem</span></code> describing
the processing step and runtime parameters to <a class="reference internal" href="../ocrd_models/ocrd_models.ocrd_page.html#ocrd_models.ocrd_page.PcGtsType" title="ocrd_models.ocrd_page.PcGtsType"><code class="xref py py-class docutils literal notranslate"><span class="pre">PcGtsType</span></code></a> <code class="docutils literal notranslate"><span class="pre">pcgts</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.resolve_resource">
<span class="sig-name descname"><span class="pre">resolve_resource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/base.html#Processor.resolve_resource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.Processor.resolve_resource" title="Link to this definition">¶</a></dt>
<dd><p>Resolve a resource name to an absolute file path with the algorithm in
<a class="reference external" href="https://ocr-d.de/en/spec/ocrd_tool#file-parameters">https://ocr-d.de/en/spec/ocrd_tool#file-parameters</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>val</strong> (<em>string</em>) – resource value to resolve</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.show_resource">
<span class="sig-name descname"><span class="pre">show_resource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/base.html#Processor.show_resource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.Processor.show_resource" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.list_all_resources">
<span class="sig-name descname"><span class="pre">list_all_resources</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/base.html#Processor.list_all_resources"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.Processor.list_all_resources" title="Link to this definition">¶</a></dt>
<dd><p>List all resources found in the filesystem and matching content-type by filename suffix</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.module">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">module</span></span><a class="headerlink" href="#ocrd.processor.base.Processor.module" title="Link to this definition">¶</a></dt>
<dd><p>The top-level module this processor belongs to.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.moduledir">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">moduledir</span></span><a class="headerlink" href="#ocrd.processor.base.Processor.moduledir" title="Link to this definition">¶</a></dt>
<dd><p>The filesystem path of the module directory.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.input_files">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">input_files</span></span><a class="headerlink" href="#ocrd.processor.base.Processor.input_files" title="Link to this definition">¶</a></dt>
<dd><p>List the input files (for single-valued <code class="xref py py-attr docutils literal notranslate"><span class="pre">input_file_grp</span></code>).</p>
<p>For each physical page:</p>
<ul class="simple">
<li><p>If there is a single PAGE-XML for the page, take it (and forget about all
other files for that page)</p></li>
<li><p>Else if there is a single image file, take it (and forget about all other
files for that page)</p></li>
<li><p>Otherwise raise an error (complaining that only PAGE-XML warrants
having multiple images for a single page)</p></li>
</ul>
<p>Algorithm &lt;<a class="reference external" href="https://github.com/cisocrgroup/ocrd_cis/pull/57#issuecomment-656336593">https://github.com/cisocrgroup/ocrd_cis/pull/57#issuecomment-656336593</a>&gt;_</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of <a class="reference internal" href="../ocrd_models/ocrd_models.ocrd_file.html#ocrd_models.ocrd_file.OcrdFile" title="ocrd_models.ocrd_file.OcrdFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocrd_models.ocrd_file.OcrdFile</span></code></a> objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ocrd.processor.base.Processor.zip_input_files">
<span class="sig-name descname"><span class="pre">zip_input_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">require_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mimetype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'skip'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/base.html#Processor.zip_input_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.Processor.zip_input_files" title="Link to this definition">¶</a></dt>
<dd><p>List tuples of input files (for multi-valued <code class="xref py py-attr docutils literal notranslate"><span class="pre">input_file_grp</span></code>).</p>
<p>Processors that expect/need multiple input file groups,
cannot use <a class="reference internal" href="#ocrd.processor.base.Processor.input_files" title="ocrd.processor.base.Processor.input_files"><code class="xref py py-data docutils literal notranslate"><span class="pre">input_files</span></code></a>. They must align (zip) input files
across pages. This includes the case where not all pages
are equally present in all file groups. It also requires
making a consistent selection if there are multiple files
per page.</p>
<p>Following the OCR-D functional model, this function tries to
find a single PAGE file per page, or fall back to a single
image file per page. In either case, multiple matches per page
are an error (see error handling below).
This default behaviour can be changed by using a fixed MIME
type filter via <code class="xref py py-attr docutils literal notranslate"><span class="pre">mimetype</span></code>. But still, multiple matching
files per page are an error.</p>
<p>Single-page multiple-file errors are handled according to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">on_error</span></code>:</p>
<ul class="simple">
<li><p>if <code class="docutils literal notranslate"><span class="pre">skip</span></code>, then the page for the respective fileGrp will be
silently skipped (as if there was no match at all)</p></li>
<li><p>if <code class="docutils literal notranslate"><span class="pre">first</span></code>, then the first matching file for the page will be
silently selected (as if the first was the only match)</p></li>
<li><p>if <code class="docutils literal notranslate"><span class="pre">last</span></code>, then the last matching file for the page will be
silently selected (as if the last was the only match)</p></li>
<li><p>if <code class="docutils literal notranslate"><span class="pre">abort</span></code>, then an exception will be raised.</p></li>
</ul>
<p>Multiple matches for PAGE-XML will always raise an exception.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>require_first</strong> (<em>boolean</em>) – If true, then skip a page entirely
whenever it is not available in the first input <cite>fileGrp</cite>.</p></li>
<li><p><strong>mimetype</strong> (<em>string</em>) – If not <cite>None</cite>, filter by the specified MIME
type (literal or regex prefixed by <cite>//</cite>). Otherwise prefer
PAGE or image.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of <a class="reference internal" href="../ocrd_models/ocrd_models.ocrd_file.html#ocrd_models.ocrd_file.OcrdFile" title="ocrd_models.ocrd_file.OcrdFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">ocrd_models.ocrd_file.OcrdFile</span></code></a> tuples.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ocrd.processor.base.generate_processor_help">
<span class="sig-prename descclassname"><span class="pre">ocrd.processor.base.</span></span><span class="sig-name descname"><span class="pre">generate_processor_help</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ocrd_tool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">processor_instance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subcommand</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/helpers.html#generate_processor_help"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.generate_processor_help" title="Link to this definition">¶</a></dt>
<dd><p>Generate a string describing the full CLI of this processor including params.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ocrd_tool</strong> (<em>dict</em>) – this processor’s <code class="docutils literal notranslate"><span class="pre">tools</span></code> section of the module’s <code class="docutils literal notranslate"><span class="pre">ocrd-tool.json</span></code></p></li>
<li><p><strong>processor_instance</strong> – the processor implementation
(for adding any module/class/function docstrings)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ocrd.processor.base.run_cli">
<span class="sig-prename descclassname"><span class="pre">ocrd.processor.base.</span></span><span class="sig-name descname"><span class="pre">run_cli</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">executable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mets_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_file_grp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file_grp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">working_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mets_server_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/helpers.html#run_cli"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.run_cli" title="Link to this definition">¶</a></dt>
<dd><p>Open a workspace and run a processor on the command line.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">workspace</span></code> is not none, reuse that. Otherwise, instantiate an
<code class="xref py py-class docutils literal notranslate"><span class="pre">Workspace</span></code> for <code class="xref py py-attr docutils literal notranslate"><span class="pre">mets_url</span></code> (and <code class="xref py py-attr docutils literal notranslate"><span class="pre">working_dir</span></code>)
by using <code class="xref py py-meth docutils literal notranslate"><span class="pre">ocrd.Resolver.workspace_from_url()</span></code> (i.e. open or clone local workspace).</p>
<p>Run the processor CLI <code class="xref py py-attr docutils literal notranslate"><span class="pre">executable</span></code> on the workspace, passing:
- the workspace,
- <code class="xref py py-attr docutils literal notranslate"><span class="pre">page_id</span></code>
- <code class="xref py py-attr docutils literal notranslate"><span class="pre">input_file_grp</span></code>
- <code class="xref py py-attr docutils literal notranslate"><span class="pre">output_file_grp</span></code>
- <code class="xref py py-attr docutils literal notranslate"><span class="pre">parameter</span></code> (after applying any <code class="xref py py-attr docutils literal notranslate"><span class="pre">parameter_override</span></code> settings)</p>
<p>(Will create output files and update the in the filesystem).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>executable</strong> (<em>string</em>) – Executable name of the module processor.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ocrd.processor.base.run_processor">
<span class="sig-prename descclassname"><span class="pre">ocrd.processor.base.</span></span><span class="sig-name descname"><span class="pre">run_processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">processorClass</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mets_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workspace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_file_grp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file_grp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_resource</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_resources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter_override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">working_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mets_server_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_caching</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd/processor/helpers.html#run_processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ocrd.processor.base.run_processor" title="Link to this definition">¶</a></dt>
<dd><p>Instantiate a Pythonic processor, open a workspace, run the processor and save the workspace.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">workspace</span></code> is not none, reuse that. Otherwise, instantiate an
<code class="xref py py-class docutils literal notranslate"><span class="pre">Workspace</span></code> for <code class="xref py py-attr docutils literal notranslate"><span class="pre">mets_url</span></code> (and <code class="xref py py-attr docutils literal notranslate"><span class="pre">working_dir</span></code>)
by using <code class="xref py py-meth docutils literal notranslate"><span class="pre">ocrd.Resolver.workspace_from_url()</span></code> (i.e. open or clone local workspace).</p>
<p>Instantiate a Python object for <code class="xref py py-attr docutils literal notranslate"><span class="pre">processorClass</span></code>, passing:
- the workspace,
- <code class="xref py py-attr docutils literal notranslate"><span class="pre">page_id</span></code>
- <code class="xref py py-attr docutils literal notranslate"><span class="pre">input_file_grp</span></code>
- <code class="xref py py-attr docutils literal notranslate"><span class="pre">output_file_grp</span></code>
- <code class="xref py py-attr docutils literal notranslate"><span class="pre">parameter</span></code> (after applying any <code class="xref py py-attr docutils literal notranslate"><span class="pre">parameter_override</span></code> settings)</p>
<p>Warning: Avoid setting the <cite>instance_caching</cite> flag to True. It may have unexpected side effects.
This flag is used for an experimental feature we would like to adopt in future.</p>
<p>Run the processor on the workspace (creating output files in the filesystem).</p>
<p>Finally, write back the workspace (updating the METS in the filesystem).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>processorClass</strong> (<em>object</em>) – Python class of the module processor.</p>
</dd>
</dl>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/ocrd-logo-small.png" alt="Logo" />
    
    <h1 class="logo logo-name">OCR-D/core</h1>
    
  </a>
</p>



<p class="blurb">Software library for OCR-D</p>






<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">ocrd</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="ocrd.html">ocrd package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="ocrd.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ocrd.cli.html">ocrd.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ocrd.decorators.html">ocrd.decorators package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="ocrd.processor.html">ocrd.processor package</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="ocrd.processor.html#subpackages">Subpackages</a></li>
<li class="toctree-l5 current"><a class="reference internal" href="ocrd.processor.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ocrd.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ocrd_utils/modules.html">ocrd_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ocrd_models/modules.html">ocrd_models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ocrd_validators/modules.html">ocrd_validators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ocrd_modelfactory/modules.html">ocrd_modelfactory</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">ocrd</a><ul>
  <li><a href="ocrd.html">ocrd package</a><ul>
  <li><a href="ocrd.processor.html">ocrd.processor package</a><ul>
      <li>Previous: <a href="ocrd.processor.builtin.dummy_processor.html" title="previous chapter">ocrd.processor.builtin.dummy_processor module</a></li>
      <li>Next: <a href="ocrd.processor.helpers.html" title="next chapter">ocrd.processor.helpers module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2018-2024, OCR-D.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.3.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../_sources/api/ocrd/ocrd.processor.base.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>