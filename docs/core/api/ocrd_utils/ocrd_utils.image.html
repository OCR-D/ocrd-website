<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8"/>
  <title></title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="shortcut icon" href="https://avatars0.githubusercontent.com/u/26362587?s=200&amp;v=4"></link>
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/bulma.css"></link>
  <link rel="stylesheet" href="/assets/bulma-switch.min.css"></link>
  <link rel="stylesheet" href="/assets/syntax-highlight.css"></link>
  <link rel="stylesheet" href="/assets/ocrd.css"></link>
</head>
<body><nav class="navbar is-transparent is-fixed-top">

  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="/assets/ocrd-logo-small.png" height="28"/>
    </a>
    <div class="navbar-burger burger" data-target="ocrd-navbar-menu">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div id="ocrd-navbar-menu" class="navbar-menu">
    <div class="navbar-start">
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/">About</a>
        <div class="navbar-dropdown">
          

          
          

            
            <a class="navbar-item" href="/de/phase3">OCR-D Phase III</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/about">The OCR-D-project</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/contact">Get in touch!</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/blog">Blog</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/publications">Publications and Presentations</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/module-projects">Module Projects</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/data">Data</a>

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/initial-tests">Initial tests</a>
            

          

          

          
          

            
            <a class="navbar-item" href="/en/user_survey">User Survey</a>

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/imprint">Imprint</a>
            

          

          
        </div>
      </div>
      
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/dev">Developers</a>
        <div class="navbar-dropdown">
          

          
          

            
            <a class="navbar-item" href="/en/gt-guidelines/trans">Ground Truth Guidelines</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/gt-guidelines/trans/trPage">PAGE-XML format documentation</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/dev-best-practice">OCR-D development best practices</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/spec">Specifications</a>

          

          

          
          

            
            <a class="navbar-item" href="/core">OCR-D/core API Documentation</a>

          

          
        </div>
      </div>
      
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/use">Users</a>
        <div class="navbar-dropdown">
          

          
          
            
            
              
              <a class="navbar-item" href="/en/setup">Setup Guide</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/user_guide">User Guide</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/workflows">Workflows</a>
            

          

          

          
          

            
            <a class="navbar-item" href="/en/models">Models</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/spec/glossary">Glossary</a>

          

          
        </div>
      </div>
      
      
      
        <a class="navbar-item" href="/en/faq">FAQ</a>
      
      

    </div>

    <div class="navbar-end">

      <span class="navbar-item">
          
      </span>

    </div> </div> </nav>
<div class="columns">
      

      <main class="container content column " aria-label="Content">
        <!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ocrd_utils.image module &#8212; ocrd  documentation</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ocrd_utils.introspect module" href="ocrd_utils.introspect.html" />
    <link rel="prev" title="ocrd_utils.deprecate module" href="ocrd_utils.deprecate.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ocrd_utils.introspect.html" title="ocrd_utils.introspect module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ocrd_utils.deprecate.html" title="ocrd_utils.deprecate module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">ocrd  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >ocrd_utils</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="ocrd_utils.html" accesskey="U">ocrd_utils package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">ocrd_utils.image module</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-ocrd_utils.image">
<span id="ocrd-utils-image-module"></span><h1>ocrd_utils.image module<a class="headerlink" href="#module-ocrd_utils.image" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="ocrd_utils.image.adjust_canvas_to_rotation">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">adjust_canvas_to_rotation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="n">angle</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#adjust_canvas_to_rotation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.adjust_canvas_to_rotation" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the enlarged image size after rotation.</p>
<p>Given a numpy array <code class="docutils literal notranslate"><span class="pre">size</span></code> of an original canvas (width and height),
and a rotation angle in degrees counter-clockwise <code class="docutils literal notranslate"><span class="pre">angle</span></code>,
calculate the new size which is necessary to encompass the full
image after rotation.</p>
<p>Return a numpy array of the enlarged width and height.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.adjust_canvas_to_transposition">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">adjust_canvas_to_transposition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span></em>, <em class="sig-param"><span class="n">method</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#adjust_canvas_to_transposition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.adjust_canvas_to_transposition" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the flipped image size after transposition.</p>
<p>Given a numpy array <code class="docutils literal notranslate"><span class="pre">size</span></code> of an original canvas (width and height),
and a transposition mode <code class="docutils literal notranslate"><span class="pre">method</span></code> (see <code class="docutils literal notranslate"><span class="pre">transpose_image</span></code>),
calculate the new size after transposition.</p>
<p>Return a numpy array of the enlarged width and height.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.bbox_from_points">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">bbox_from_points</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">points</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#bbox_from_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.bbox_from_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a numeric list representing a bounding box from polygon coordinates in page representation.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.bbox_from_polygon">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">bbox_from_polygon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">polygon</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#bbox_from_polygon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.bbox_from_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a numeric list representing a bounding box from polygon coordinates in numeric list representation.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.bbox_from_xywh">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">bbox_from_xywh</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xywh</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#bbox_from_xywh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.bbox_from_xywh" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a bounding box from a numeric dict to a numeric list representation.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.coordinates_for_segment">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">coordinates_for_segment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">polygon</span></em>, <em class="sig-param"><span class="n">parent_image</span></em>, <em class="sig-param"><span class="n">parent_coords</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#coordinates_for_segment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.coordinates_for_segment" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert relative coordinates to absolute.</p>
<p>Given…</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">polygon</span></code>, a numpy array of points relative to</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent_image</span></code>, a PIL.Image (not used), along with</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent_coords</span></code>, its corresponding affine transformation,</p></li>
</ul>
<p>…calculate the absolute coordinates within the page.</p>
<p>That is, apply the given transform inversely to <code class="docutils literal notranslate"><span class="pre">polygon</span></code>
The transform encodes (recursively):</p>
<ol class="arabic simple">
<li><p>Whenever <code class="docutils literal notranslate"><span class="pre">parent_image</span></code> or any of its parents was cropped,
all points must be shifted by the offset in opposite direction
(i.e. coordinate system gets translated by the upper left).</p></li>
<li><p>Whenever <code class="docutils literal notranslate"><span class="pre">parent_image</span></code> or any of its parents was rotated,
all points must be rotated around the center of that image in
opposite direction
(i.e. coordinate system gets translated by the center in
opposite direction, rotated purely, and translated back;
the latter involves an additional offset from the increase
in canvas size necessary to accommodate all points).</p></li>
</ol>
<p>Return the rounded numpy array of the resulting polygon.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.coordinates_of_segment">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">coordinates_of_segment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">segment</span></em>, <em class="sig-param"><span class="n">parent_image</span></em>, <em class="sig-param"><span class="n">parent_coords</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#coordinates_of_segment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.coordinates_of_segment" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the coordinates of a PAGE segment element relative to its parent.</p>
<p>Given…</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">segment</span></code>, a PAGE segment object in absolute coordinates
(i.e. RegionType / TextLineType / WordType / GlyphType), and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent_image</span></code>, the PIL.Image of its corresponding parent object
(i.e. PageType / RegionType / TextLineType / WordType), (not used),
along with</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent_coords</span></code>, its corresponding affine transformation,</p></li>
</ul>
<p>…calculate the relative coordinates of the segment within the image.</p>
<p>That is, apply the given transform to the points annotated in <code class="docutils literal notranslate"><span class="pre">segment</span></code>.
The transform encodes (recursively):</p>
<ol class="arabic simple">
<li><p>Whenever <code class="docutils literal notranslate"><span class="pre">parent_image</span></code> or any of its parents was cropped,
all points must be shifted by the offset
(i.e. coordinate system gets translated by the upper left).</p></li>
<li><p>Whenever <code class="docutils literal notranslate"><span class="pre">parent_image</span></code> or any of its parents was rotated,
all points must be rotated around the center of that image
(i.e. coordinate system gets translated by the center in
opposite direction, rotated purely, and translated back;
the latter involves an additional offset from the increase
in canvas size necessary to accommodate all points).</p></li>
</ol>
<p>Return the rounded numpy array of the resulting polygon.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.image_from_polygon">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">image_from_polygon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">polygon</span></em>, <em class="sig-param"><span class="n">fill</span><span class="o">=</span><span class="default_value">'background'</span></em>, <em class="sig-param"><span class="n">transparency</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#image_from_polygon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.image_from_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>“Mask an image with a polygon.</p>
<p>Given a PIL.Image <code class="docutils literal notranslate"><span class="pre">image</span></code> and a numpy array <code class="docutils literal notranslate"><span class="pre">polygon</span></code>
of relative coordinates into the image, fill everything
outside the polygon hull to a color according to <code class="docutils literal notranslate"><span class="pre">fill</span></code>:</p>
<ul class="simple">
<li><p>if <code class="docutils literal notranslate"><span class="pre">background</span></code> (the default),
then use the median color of the image;</p></li>
<li><p>otherwise use the given color, e.g. <code class="docutils literal notranslate"><span class="pre">'white'</span></code> or (255,255,255).</p></li>
</ul>
<p>Moreover, if <code class="docutils literal notranslate"><span class="pre">transparency</span></code> is true, then add an alpha channel
from the polygon mask (i.e. everything outside the polygon will
be transparent, for those consumers that can interpret alpha channels).
Images which already have an alpha channel will have it shrunk
from the polygon mask (i.e. everything outside the polygon will
be transparent, in addition to existing transparent pixels).</p>
<p>Return a new PIL.Image.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.points_from_bbox">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">points_from_bbox</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minx</span></em>, <em class="sig-param"><span class="n">miny</span></em>, <em class="sig-param"><span class="n">maxx</span></em>, <em class="sig-param"><span class="n">maxy</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#points_from_bbox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.points_from_bbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct polygon coordinates in page representation from a numeric list representing a bounding box.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.points_from_polygon">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">points_from_polygon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">polygon</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#points_from_polygon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.points_from_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert polygon coordinates from a numeric list representation to a page representation.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.points_from_x0y0x1y1">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">points_from_x0y0x1y1</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xyxy</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#points_from_x0y0x1y1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.points_from_x0y0x1y1" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a polygon representation from a rectangle described as a list [x0, y0, x1, y1]</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.points_from_xywh">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">points_from_xywh</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">box</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#points_from_xywh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.points_from_xywh" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct polygon coordinates in page representation from numeric dict representing a bounding box.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.points_from_y0x0y1x1">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">points_from_y0x0y1x1</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">yxyx</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#points_from_y0x0y1x1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.points_from_y0x0y1x1" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a polygon representation from a rectangle described as a list [y0, x0, y1, x1]</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.polygon_from_bbox">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">polygon_from_bbox</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minx</span></em>, <em class="sig-param"><span class="n">miny</span></em>, <em class="sig-param"><span class="n">maxx</span></em>, <em class="sig-param"><span class="n">maxy</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#polygon_from_bbox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.polygon_from_bbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct polygon coordinates in numeric list representation from a numeric list representing a bounding box.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.polygon_from_points">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">polygon_from_points</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">points</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#polygon_from_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.polygon_from_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert polygon coordinates in page representation to polygon coordinates in numeric list representation.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.polygon_from_x0y0x1y1">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">polygon_from_x0y0x1y1</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x0y0x1y1</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#polygon_from_x0y0x1y1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.polygon_from_x0y0x1y1" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct polygon coordinates in numeric list representation from a string list representing a bounding box.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.polygon_from_xywh">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">polygon_from_xywh</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xywh</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#polygon_from_xywh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.polygon_from_xywh" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct polygon coordinates in numeric list representation from numeric dict representing a bounding box.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.polygon_mask">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">polygon_mask</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">image</span></em>, <em class="sig-param"><span class="n">coordinates</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#polygon_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.polygon_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>“Create a mask image of a polygon.</p>
<p>Given a PIL.Image <code class="docutils literal notranslate"><span class="pre">image</span></code> (merely for dimensions), and
a numpy array <code class="docutils literal notranslate"><span class="pre">polygon</span></code> of relative coordinates into the image,
create a new image of the same size with black background, and
fill everything inside the polygon hull with white.</p>
<p>Return the new PIL.Image.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.rotate_coordinates">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">rotate_coordinates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transform</span></em>, <em class="sig-param"><span class="n">angle</span></em>, <em class="sig-param"><span class="n">orig</span><span class="o">=</span><span class="default_value">array([0, 0])</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#rotate_coordinates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.rotate_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Compose an affine coordinate transformation with a passive rotation.</p>
<p>Given a numpy array <code class="docutils literal notranslate"><span class="pre">transform</span></code> of an existing transformation
matrix in homogeneous (3d) coordinates, and a rotation angle in
degrees counter-clockwise <code class="docutils literal notranslate"><span class="pre">angle</span></code>, as well as a numpy array
<code class="docutils literal notranslate"><span class="pre">orig</span></code> of the center of rotation, calculate the affine
coordinate transform corresponding to the composition of both
transformations. (This entails translation to the center, followed
by pure rotation, and subsequent translation back. However, since
rotation necessarily increases the bounding box, and thus image size,
do not translate back the same amount, but to the enlarged offset.)</p>
<p>Return a numpy array of the resulting affine transformation matrix.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.shift_coordinates">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">shift_coordinates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transform</span></em>, <em class="sig-param"><span class="n">offset</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#shift_coordinates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.shift_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Compose an affine coordinate transformation with a translation.</p>
<p>Given a numpy array <code class="docutils literal notranslate"><span class="pre">transform</span></code> of an existing transformation
matrix in homogeneous (3d) coordinates, and a numpy array
<code class="docutils literal notranslate"><span class="pre">offset</span></code> of the translation vector, calculate the affine
coordinate transform corresponding to the composition of both
transformations.</p>
<p>Return a numpy array of the resulting affine transformation matrix.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.transform_coordinates">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">transform_coordinates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">polygon</span></em>, <em class="sig-param"><span class="n">transform</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#transform_coordinates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.transform_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply an affine transformation to a set of points.
Augment the 2d numpy array of points <code class="docutils literal notranslate"><span class="pre">polygon</span></code> with a an extra
column of ones (homogeneous coordinates), then multiply with
the transformation matrix <code class="docutils literal notranslate"><span class="pre">transform</span></code> (or the identity matrix),
and finally remove the extra column from the result.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.transpose_coordinates">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">transpose_coordinates</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">transform</span></em>, <em class="sig-param"><span class="n">method</span></em>, <em class="sig-param"><span class="n">orig</span><span class="o">=</span><span class="default_value">array([0, 0])</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#transpose_coordinates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.transpose_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>“Compose an affine coordinate transformation with a transposition (i.e. flip or rotate in 90° multiples).</p>
<p>Given a numpy array <code class="docutils literal notranslate"><span class="pre">transform</span></code> of an existing transformation
matrix in homogeneous (3d) coordinates, a transposition mode <code class="docutils literal notranslate"><span class="pre">method</span></code>,
as well as a numpy array <code class="docutils literal notranslate"><span class="pre">orig</span></code> of the center of the image,
calculate the affine coordinate transform corresponding to the composition
of both transformations, which is respectively:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PIL.Image.FLIP_LEFT_RIGHT</span></code>:
entails translation to the center, followed by pure reflection
about the y-axis, and subsequent translation back</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PIL.Image.FLIP_TOP_BOTTOM</span></code>:
entails translation to the center, followed by pure reflection
about the x-axis, and subsequent translation back</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PIL.Image.ROTATE_180</span></code>:
entails translation to the center, followed by pure reflection
about the origin, and subsequent translation back</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PIL.Image.ROTATE_90</span></code>:
entails translation to the center, followed by pure rotation
by 90° counter-clockwise, and subsequent translation back</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PIL.Image.ROTATE_270</span></code>:
entails translation to the center, followed by pure rotation
by 270° counter-clockwise, and subsequent translation back</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PIL.Image.TRANSPOSE</span></code>:
entails translation to the center, followed by pure rotation
by 90° counter-clockwise and pure reflection about the x-axis,
and subsequent translation back</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PIL.Image.TRANSVERSE</span></code>:
entails translation to the center, followed by pure rotation
by 90° counter-clockwise and pure reflection about the y-axis,
and subsequent translation back</p></li>
</ul>
<p>Return a numpy array of the resulting affine transformation matrix.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.xywh_from_bbox">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">xywh_from_bbox</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minx</span></em>, <em class="sig-param"><span class="n">miny</span></em>, <em class="sig-param"><span class="n">maxx</span></em>, <em class="sig-param"><span class="n">maxy</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#xywh_from_bbox"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.xywh_from_bbox" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a bounding box from a numeric list to a numeric dict representation.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.xywh_from_points">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">xywh_from_points</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">points</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#xywh_from_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.xywh_from_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a numeric dict representing a bounding box from polygon coordinates in page representation.</p>
</dd></dl>

<dl class="py function">
<dt id="ocrd_utils.image.xywh_from_polygon">
<code class="sig-prename descclassname">ocrd_utils.image.</code><code class="sig-name descname">xywh_from_polygon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">polygon</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ocrd_utils/image.html#xywh_from_polygon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocrd_utils.image.xywh_from_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a numeric dict representing a bounding box from polygon coordinates in numeric list representation.</p>
</dd></dl>

</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="ocrd_utils.deprecate.html"
                        title="previous chapter">ocrd_utils.deprecate module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ocrd_utils.introspect.html"
                        title="next chapter">ocrd_utils.introspect module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/api/ocrd_utils/ocrd_utils.image.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="ocrd_utils.introspect.html" title="ocrd_utils.introspect module"
             >next</a> |</li>
        <li class="right" >
          <a href="ocrd_utils.deprecate.html" title="ocrd_utils.deprecate module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">ocrd  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >ocrd_utils</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="ocrd_utils.html" >ocrd_utils package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">ocrd_utils.image module</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Kay Wuerzner, Konstantin Baierer.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>
      </main>
    </div><footer class="footer" style="padding: 1rem">
    <div class="content has-text-centered">
      <img class="footer-logo" src="/assets/dfg_logo_eng.jpg" alt="DFG logo"/>
    </div>
    <!-- <div class="content has-text-centered"> -->
    <!--   <img class="footer-logo" src="/assets/logo-bbaw.png" alt="BBAW logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-hab.gif" alt="HAB logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-kit.png" alt="KIT logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-sbb.png" alt="SBB logo"/> -->
    <!-- </div> -->
    <div class="content has-text-centered">
      <a href="https://github.com/OCR-D">GitHub</a>
      |
      <a href="https://gitter.im/OCR-D/Lobby">gitter</a>
      |
      <a href="https://github.com/OCR-D/ocrd-website/wiki">Wiki</a>
      |
      <a href="https://hub.docker.com/u/ocrd">Docker Hub</a>
      |
      <a href="https://www.zotero.org/groups/418719/ocr-d">Technology Watch</a>
      |
      <a href="/sitemap.xml">sitemap.xml</a>
    </div>

<script src="/assets/script.js"></script>
</footer>
</body>

</html>
