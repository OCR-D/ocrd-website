<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8"/>
  <title>Provenance - OCR-D</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="shortcut icon" href="https://avatars0.githubusercontent.com/u/26362587?s=200&amp;v=4" />
  <link href="/assets/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous" />
  <link rel="alternate" type="application/atom+xml" title="OCR-D Blog" href="/feed.xml" />
  <link rel="stylesheet" href="/assets/bulma.css" />
  <link rel="stylesheet" href="/assets/bulma-switch.min.css" />
  <link rel="stylesheet" href="/assets/syntax-highlight.css" />
  <link rel="stylesheet" href="/assets/ocrd.css" />
  <!-- for mathjax support -->
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['$$', '$$']],
        processEscapes: true,
      },
    }
  </script>
  <script type="text/javascript" id="MathJax-script" async src="/assets/mathjax/es5/tex-chtml.js">
  </script>
</head>
<body>
<script async src="https://cse.google.com/cse.js?cx=e9e3f7148e57ed66c"></script>


<script>
function ToggleSearchActive2() {
    var T = document.getElementById("button-header")
	var A = document.getElementById("google-search-header");
    T.style.display = "none";  // <-- Set it to none
	A.style.visibility = "visible";  // <-- Set it to visible
}
</script>


<nav class="navbar is-transparent is-fixed-top">

  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="/assets/ocrd-logo-small.png" height="28"/>
    </a>
    <div class="navbar-burger burger" data-target="ocrd-navbar-menu">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div id="ocrd-navbar-menu" class="navbar-menu">
    <div class="navbar-start">
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/">About</a>
        <div class="navbar-dropdown">
          

          
          

            
            <a class="navbar-item" href="/en/blog">News</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/about">About the OCR-D Project</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/phase2">Phase II: Projects</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/phase3">Phase III: Projects</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/community">Community</a>

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/publications">Publications and Presentations</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/data">Data</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/initial-tests">Pilot Study</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/user_survey">User Survey</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/contact">Contacts</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/imprint">Imprint</a>
            

          

          
        </div>
      </div>
      

      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/dev">Technical Resources</a>
        <div class="navbar-dropdown">
          

          
          

            
            <a class="navbar-item" href="/en/decisions">Decision Log</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/gt-guidelines/trans">Ground Truth Guidelines</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/gt-guidelines/trans/trPage">PAGE-XML format documentation</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/dev-best-practice">OCR-D development best practices</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/spec">Specifications</a>

          

          

          
          

            
            <a class="navbar-item" href="/core">OCR-D/core API Documentation</a>

          

          
        </div>
      </div>
      

      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/use">User Guides & Info</a>
        <div class="navbar-dropdown">
          

          
          
            
            
              
              <a class="navbar-item" href="/en/setup">Setup Guide</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/user_guide">User Guide</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/workflows">Workflows</a>
            

          

          

          
          

            
            <a class="navbar-item" href="/en/models">Models</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/spec/glossary">Glossary</a>

          

          
        </div>
      </div>
      

      
      
        <a class="navbar-item" href="/en/faq">FAQ</a>
      

      
	 <span class="navbar-item">
	 
            <a href="" title="View in German"></a>
				<div class="navbar-item has-dropdown is-hoverable" style="padding-right:10px">Search
				<div class="navbar-dropdown" style="font-size: 0.75em; padding:5px">For this feature, we implemented Google Programmable Search Engine. 
					If you use it, please note that cookies may be stored and Privacy Policy by Google LLC applies: 
					<a href="https://policies.google.com/privacy">https://policies.google.com/privacy</a> 
					<button onclick="ToggleSearchActive2()" id="button-header">Agree, show me Google Search!</button></div>
				</div>
				<div id="google-search-header" style="visibility: hidden">
					<div class="gcse-search"></div>
				</div>
			
	</span>
    </div>

    <div class="navbar-end">

      <span class="navbar-item">
        </span>


    </div> </div> </nav>
<div class="columns">
      
      <aside id="toc-sidebar-content" class="column is-one-third menu is-hidden-mobile">
        <ul class="menu-list column is-one-third">
  <li><a href="#provenance">Provenance</a>
    <ul>
      <li><a href="#data-model">Data Model</a></li>
      <li><a href="#format">Format</a>
        <ul>
          <li><a href="#types">Types</a>
            <ul>
              <li><a href="#namespace">Namespace</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#content">Content</a>
        <ul>
          <li><a href="#inputoutput">Input/Output</a></li>
          <li><a href="#ingest-workspace-to-ocr-d-repositorium">Ingest Workspace to OCR-D Repositorium</a></li>
        </ul>
      </li>
      <li><a href="#example">Example</a></li>
      <li><a href="#provenance-and-bagit">Provenance and BagIt</a></li>
    </ul>
  </li>
</ul>

      </aside>
      <div id="toc-sidebar-toggle">&lt;&gt;</div>
      

      <main class="container content column is-two-thirds" aria-label="Content">
        <h1 id="provenance">Provenance</h1>
<p>Provenance is information about entities, activities, and people involved in producing a piece of data or thing, which can be used to form assessments about its quality, reliability or trustworthiness. (Source: <a href="https://www.w3.org/TR/prov-dm/">The PROV Data Model (PROV-DM)</a>)</p>

<h2 id="data-model">Data Model</h2>
<p><a href="https://www.w3.org/TR/prov-dm/">The PROV Data Model (PROV-DM)</a> is used to store all provenance metadata.
All provenance have to be stored in files. 
There’s provenance at the page level, but there’s also provenance at the document level.
All files regarding provenance are stored in a subfolder <strong><code class="language-plaintext highlighter-rouge">metadata</code></strong>.</p>

<h2 id="format">Format</h2>
<p>The workflow provenance is stored in <a href="https://www.w3.org/TR/prov-xml/">PROV-XML</a>.</p>

<h3 id="types">Types</h3>
<p>All Activities, Entities belonging to the OCR-D workflow have the same namespace.</p>
<h4 id="namespace">Namespace</h4>
<dl>
  <dt><strong>Prefix</strong></dt>
  <dd>ocrd</dd>
  <dt><strong>Namespace</strong></dt>
  <dd>http://www.ocr-d.de</dd>
</dl>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Data Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Entity</td>
      <td>ocrd:mets</td>
      <td>Filename  of METS file</td>
    </tr>
    <tr>
      <td>Entity</td>
      <td>ocrd:mets_referencedFile</td>
      <td>ID of the file referenced inside METS.</td>
    </tr>
    <tr>
      <td>Entity</td>
      <td>ocrd:parameter_file</td>
      <td>Content of the parameter file.</td>
    </tr>
    <tr>
      <td>Activity</td>
      <td>ocrd:processor</td>
      <td>Processor that was executed</td>
    </tr>
    <tr>
      <td>Activity</td>
      <td>ocrd:workflow</td>
      <td>Workflow that was executed</td>
    </tr>
  </tbody>
</table>

<h2 id="content">Content</h2>
<p>Only the following information is stored for provenance:</p>

<p>(a) <strong>General data</strong></p>

<ol>
  <li>Workflow engine
    <ul>
      <li>Label including version</li>
      <li>Start date</li>
      <li>End date</li>
    </ul>
  </li>
</ol>

<p>(b) <strong>Processor data</strong></p>

<ol>
  <li>Processor
    <ul>
      <li>Label including version, conforming to <a href="https://ocr-d.de/en/spec/mets#recording-processing-information-in-mets">OCR-D <code class="language-plaintext highlighter-rouge">mets:agent/mets:name</code></a> (e.g.: <code class="language-plaintext highlighter-rouge">ocrd-kraken-binarize_Version 0.1.0</code>, <code class="language-plaintext highlighter-rouge">ocrd/core 1.0.0</code>)</li>
      <li>Start date</li>
      <li>End date</li>
    </ul>
  </li>
  <li>Content of METS file before executing the processor</li>
  <li>Content of METS file after executing processor</li>
  <li>ID of the input file(s)</li>
  <li>ID of output file(s)</li>
  <li>Content of parameter.json (optional)</li>
</ol>

<h3 id="inputoutput">Input/Output</h3>
<p>All files referenced in METS must also be referenced in provenance by their <code class="language-plaintext highlighter-rouge">mets:file/@ID</code>.
A file <em>may</em> be linked to its location (URL). The location may be replaced due to 
different uses:</p>
<ol>
  <li>local files</li>
  <li>external files</li>
</ol>

<p>All files not referenced in METS must be linked to their content in provenance. (e.g.: parameter.json)</p>

<h3 id="ingest-workspace-to-ocr-d-repositorium">Ingest Workspace to OCR-D Repositorium</h3>
<p>At least before ingesting into repository/LTA, the entire provenance must be stored in one file (metadata/ocrd_provenance.xml) to make the provenance searchable.
Therefore all the provenance files are merged into one big file.
This file replaces all provenance files stored in subfolder ‘metadata’</p>

<h2 id="example">Example</h2>
<p>The file structure could look like this after a workflow with 4 steps has been executed.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>metadata/
   |
   +-- mets.xml.'workflowid'_0000
   |
   +-- mets.xml.'workflowid'_0001
   |
   +-- mets.xml.'workflowid'_0002
   |
   +-- mets.xml.'workflowid'_0003
   |
   +-- mets.xml.'workflowid'_0004
   |
   +-- ocrd_provenance.xml
   |
   +-- provenance_'workflowid'.xml (optional)
</code></pre></div></div>

<h2 id="provenance-and-bagit">Provenance and BagIt</h2>
<p>The provenance MAY be stored as tag directory in the bagIt container.
E.g.:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;base directory&gt;/
         |
         +-- bagit.txt
         |
         +-- manifest-&lt;algorithm&gt;.txt
         |
         +-- [additional tag files]
         |
         +-- data/
         |     |
         |     +-- mets.xml
         |     |
         |     +-- ...
         |
         +-- metadata
                |
                +-- mets.xml.'workflowid'_0000
                |
                +-- ...
                |
                +-- mets.xml.'workflowid'_XXXX
                |
                +-- ocrd_provenance.xml

</code></pre></div></div>


      </main>
    </div><footer class="footer" style="padding: 1rem">
    <div class="content has-text-centered">
      <img class="footer-logo" src="/assets/dfg_logo_eng.jpg" alt="DFG logo"/>
    </div>
    <!-- <div class="content has-text-centered"> -->
    <!--   <img class="footer-logo" src="/assets/logo-bbaw.png" alt="BBAW logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-hab.gif" alt="HAB logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-kit.png" alt="KIT logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-sbb.png" alt="SBB logo"/> -->
    <!-- </div> -->
    <div class="content has-text-centered">
		<a href="https://github.com/OCR-D">GitHub</a>
		|
		<a href="https://gitter.im/OCR-D/Lobby">Gitter</a>
		|
		<a href="https://twitter.com/OCR_D_community">Twitter</a>
		|
		<a href="https://github.com/OCR-D/ocrd-website/wiki">Wiki</a>
		|
		<a href="https://hub.docker.com/u/ocrd">Docker Hub</a>
		|
		<a href="https://www.zotero.org/groups/418719/ocr-d">Technology Watch</a>
		|
		<a href="/sitemap.xml">sitemap.xml</a>
		|
		
			<a href="/en/imprint">Imprint</a>
		
    </div>

<script src="/assets/script.js"></script>
</footer>
</body>

</html>
