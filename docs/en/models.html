<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8"/>
  <title>Models for OCR-D processors - OCR-D</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="shortcut icon" href="https://avatars0.githubusercontent.com/u/26362587?s=200&amp;v=4" />
  <link href="/assets/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous" />
  <link rel="alternate" type="application/atom+xml" title="OCR-D Blog" href="/feed.xml" />
  <link rel="stylesheet" href="/assets/bulma.css" />
  <link rel="stylesheet" href="/assets/bulma-switch.min.css" />
  <link rel="stylesheet" href="/assets/syntax-highlight.css" />
  <link rel="stylesheet" href="/assets/ocrd.css" />
  <!-- for mathjax support -->
  <script type="text/javascript">
    const getSiblings = function (elem) {

      // Setup siblings array and get the first sibling
      const siblings = [];
      let sibling = elem.parentNode.firstChild;

      // Loop through each sibling and push to the array
      while (sibling) {
        if ((sibling.nodeType === 1 || sibling.nodeType === 3) && sibling !== elem) {
          siblings.push(sibling);
        }
        sibling = sibling.nextSibling
      }

      return siblings;
    };

    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['$$', '$$']],
        processEscapes: true,
      },
      startup: {
        ready: () => {
          MathJax.startup.defaultReady();
          MathJax.startup.promise.then(() => {
            const equations = document.querySelectorAll('.MathJax');

            if (equations.length === 0) return;

            equations.forEach(eq => {
              const siblings = getSiblings(eq);
              if (siblings.length === 0) {
                eq.classList.add('is-block');
              }
            })
          });
        }
      }
    }
  </script>
  <script type="text/javascript" id="MathJax-script" async src="/assets/mathjax/es5/tex-chtml.js">
  </script>
</head>
<body>
<script async src="https://cse.google.com/cse.js?cx=e9e3f7148e57ed66c"></script>


<script>
function ToggleSearchActive2() {
    var T = document.getElementById("button-header")
	var A = document.getElementById("google-search-header");
    T.style.display = "none";  // <-- Set it to none
	A.style.visibility = "visible";  // <-- Set it to visible
}
</script>


<nav class="navbar is-transparent is-fixed-top">

  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="/assets/ocrd-logo-small.png" height="28"/>
    </a>
    <div class="navbar-burger burger" data-target="ocrd-navbar-menu">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div id="ocrd-navbar-menu" class="navbar-menu">
    <div class="navbar-start">
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/">About</a>
        <div class="navbar-dropdown">
          

          
          

            
            <a class="navbar-item" href="/en/blog">News</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/about">About the OCR-D Project</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/phase2">Phase II: Projects</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/phase3">Phase III: Projects</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/community">Community</a>

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/publications">Publications and Presentations</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/data">Data</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/initial-tests">Pilot Study</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/user_survey">User Survey</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/contact">Contacts</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/imprint">Imprint</a>
            

          

          
        </div>
      </div>
      

      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/dev">Technical Resources</a>
        <div class="navbar-dropdown">
          

          
          

            
            <a class="navbar-item" href="/en/decisions">Decision Log</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/gt-guidelines/trans">Ground Truth Guidelines</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/gt-guidelines/trans/trPage">PAGE-XML format documentation</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/dev-best-practice">OCR-D development best practices</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/spec">Specifications</a>

          

          

          
          

            
            <a class="navbar-item" href="/core">OCR-D/core API Documentation</a>

          

          
        </div>
      </div>
      

      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/use">User Guides & Info</a>
        <div class="navbar-dropdown">
          

          
          
            
            
              
              <a class="navbar-item" href="/en/setup">Setup Guide</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/user_guide">User Guide</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/workflows">Workflows</a>
            

          

          

          
          

            
            <a class="navbar-item" href="/en/models">Models</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/spec/glossary">Glossary</a>

          

          
        </div>
      </div>
      

      
      
        <a class="navbar-item" href="/en/faq">FAQ</a>
      

      
	 <span class="navbar-item">
	 
            <a href="" title="View in German"></a>
				<div class="navbar-item has-dropdown is-hoverable" style="padding-right:10px">Search
				<div class="navbar-dropdown" style="font-size: 0.75em; padding:5px">For this feature, we implemented Google Programmable Search Engine. 
					If you use it, please note that cookies may be stored and Privacy Policy by Google LLC applies: 
					<a href="https://policies.google.com/privacy">https://policies.google.com/privacy</a> 
					<button onclick="ToggleSearchActive2()" id="button-header">Agree, show me Google Search!</button></div>
				</div>
				<div id="google-search-header" style="visibility: hidden">
					<div class="gcse-search"></div>
				</div>
			
	</span>
    </div>

    <div class="navbar-end">

      <span class="navbar-item"><a href="/de/modelle.html" title="View in German">de</a>
              
        </span>


    </div> </div> </nav>
<div class="wrapper has-toc">
      
      <div id="toc-sidebar-toggle">
        <a class="button is-outlined is-link" title="
          Toggle Table of Contents
          
        ">
          <i class="fa"></i>
        </a>
      </div>
      <aside id="toc-sidebar">
        <div class="toc-wrapper">
          <div class="toc-header">
            <h2>
              Table of Contents
              
            </h2>
          </div>
          <div class="toc-body">
            <ul class="menu-list">
  <li><a href="#models-for-ocr-d-processors">Models for OCR-D processors</a>
    <ul>
      <li><a href="#what-models-are-available">What models are available?</a></li>
      <li><a href="#installing-resources">Installing resources</a>
        <ul>
          <li><a href="#installing-known-resources">Installing known resources</a></li>
          <li><a href="#installing-unknown-resources">Installing unknown resources</a></li>
          <li><a href="#models-and-docker">Models and Docker</a></li>
        </ul>
      </li>
      <li><a href="#list-installed-resources">List installed resources</a></li>
      <li><a href="#user-database">User database</a></li>
      <li><a href="#where-is-the-data">Where is the data</a></li>
      <li><a href="#changing-the-default-resource-directory">Changing the default resource directory</a></li>
      <li><a href="#notes-on-specific-processors">Notes on specific processors</a></li>
      <li><a href="#ocropy--ocrd_cis">Ocropy / ocrd_cis</a></li>
      <li><a href="#calamari--ocrd_calamari">Calamari / ocrd_calamari</a></li>
      <li><a href="#tesseract--ocrd_tesserocr">Tesseract / ocrd_tesserocr</a></li>
    </ul>
  </li>
  <li><a href="#model-training">Model training</a>
    <ul>
      <li><a href="#tesstrain">Tesstrain</a></li>
      <li><a href="#okralact">okralact</a></li>
    </ul>
  </li>
  <li><a href="#further-reading">Further reading</a></li>
</ul>

          </div>
        </div>
      </aside>
      

      <main class="container content " aria-label="Content">
        <h1 id="models-for-ocr-d-processors">Models for OCR-D processors</h1>

<p>OCR engines rely on pre-trained models for their recognition. Every engine has
its own internal format(s) for models. Some support central storage of models
at a specific location (Tesseract, Ocropy, Kraken) while others require the full
path to a model (Calamari).</p>

<p>Moreover, many processors provide other file resources like configuration files or presets.</p>

<p>Since <a href="https://github.com/OCR-D/core/releases/v2.22.0">v2.22.0</a>, OCR-D/core
comes with a framework for managing <strong>file resources</strong> uniformly. This means
that processors can delegate to OCR-D/core to resolve specific file resources by name,
looking in well-defined places in the filesystem. This also includes downloading and caching
file parameters passed as a URL. Furthermore, OCR-D/core comes with a bundled database
of known resources, such as models, dictionaries, configurations and other
processor-specific data files. Processors can add their own specifications to that.</p>

<p>This means that OCR-D users should be able to concentrate on fine-tuning their OCR workflows
and not bother with implementation details like “where do I get models from and where do I put them”.
In particular, users can reference file parameters by name now.</p>

<p>All of the above mentioned functionality can be accessed using the <code class="language-plaintext highlighter-rouge">ocrd resmgr</code> command line tool.</p>

<h2 id="what-models-are-available">What models are available?</h2>

<p>To get a list of the (available or installed) file resources that OCR-D/core
<a href="https://github.com/OCR-D/core/blob/master/ocrd/ocrd/resource_list.yml">is aware of</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd resmgr list-available
# alternatively, using Docker:
docker run --volume ocrd-models:/models -- ocrd/all:maximum ocrd resmgr list-available
</code></pre></div></div>

<p>The output will look similar to this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd-calamari-recognize
- qurator-gt4hist-0.3 (https://qurator-data.de/calamari-models/GT4HistOCR/2019-07-22T15_49+0200/model.tar.xz)
  Calamari model trained with GT4HistOCR
- qurator-gt4hist-1.0 (https://qurator-data.de/calamari-models/GT4HistOCR/2019-12-11T11_10+0100/model.tar.xz)
  Calamari model trained with GT4HistOCR

ocrd-cis-ocropy-recognize
- LatinHist.pyrnn.gz (https://github.com/chreul/OCR_Testdata_EarlyPrintedBooks/raw/master/LatinHist-98000.pyrnn.gz)
  ocropy historical latin model by github.com/chreul
</code></pre></div></div>

<p>As you can see, resources are grouped by the processors which make use of them.</p>

<p>The word after the list symbol, e.g. <code class="language-plaintext highlighter-rouge">qurator-gt4hist-0.3</code>,
<code class="language-plaintext highlighter-rouge">LatinHist.pyrnn.gz</code>, defines the <em>name</em> of the resource, which is a shorthand you can
use in parameters without having to specify the full URL (in brackets after the
name).</p>

<p>The second line of each entry contains a short description of the resource.</p>

<h2 id="installing-resources">Installing resources</h2>

<p>On installing resources in OCR-D, read the follow-up sections
<a href="#installing-known-resources">Installing known resources</a> and
<a href="#installing-unknown-resources">Installing unknown resources</a>.</p>

<p><em>Known</em> resources are resources that are provided by processor developers <a href="/en/spec/ocrd_tool#file-parameters">in the <code class="language-plaintext highlighter-rouge">ocrd-tool.json</code></a>
and are available by name to <code class="language-plaintext highlighter-rouge">ocrd resmgr download</code>.</p>

<p><em>Unknown</em> resources, in contrast, are models, configurations, parameter sets etc. that you provide yourself
or found elsewhere on the Internet, which require passing a URL (or local path) to <code class="language-plaintext highlighter-rouge">ocrd resmgr download</code>.</p>

<p><strong>If you installed OCR-D via Docker,</strong> read the section <a href="#models-and-docker">Models and Docker</a> <em>additionally</em>.</p>

<h3 id="installing-known-resources">Installing known resources</h3>

<p>You can install resources with the <code class="language-plaintext highlighter-rouge">ocrd resmgr download</code> command. It expects
the name of the processor as the 1st argument and the name of a resource as a 2nd argument.</p>

<p>Since model distribution is decentralised within OCR-D, every processor can advertise its
own known resources, which the resource manager then picks up.</p>

<p>For example, to install the <code class="language-plaintext highlighter-rouge">LatinHist.pyrnn.gz</code> resource for <code class="language-plaintext highlighter-rouge">ocrd-cis-ocropy-recognize</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd resmgr download ocrd-cis-ocropy-recognize LatinHist.pyrnn.gz
</code></pre></div></div>

<p>This will look up the resource in the <a href="#user-database">bundled resource and user databases</a>, download,
unarchive (where applicable) and store it in the <a href="#where-is-the-data">proper location</a>.</p>

<blockquote>
  <p><strong>Note</strong>: The special name <code class="language-plaintext highlighter-rouge">*</code> can be used instead of a resource name/url to
download <em>all</em> known resources for this processor. To download all tesseract models:</p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd resmgr download ocrd-tesserocr-recognize <span class="s1">'*'</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: Equally, the special processor <code class="language-plaintext highlighter-rouge">*</code> can be used instead of a processor and a resource
to download <em>all</em> known resources for <em>all</em> installed processors:</p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd resmgr download <span class="s1">'*'</span>
</code></pre></div></div>

<blockquote>
  <p>(In either case, <code class="language-plaintext highlighter-rouge">*</code> must be in quotes or escaped to avoid wildcard expansion by the shell.)</p>
</blockquote>

<h3 id="installing-unknown-resources">Installing unknown resources</h3>

<p>If you need to install a resource which OCR-D does not know of, that can be achieved by passing
its URL in combination with the <code class="language-plaintext highlighter-rouge">--any-url/-n</code> flag to <code class="language-plaintext highlighter-rouge">ocrd resmgr download</code>.</p>

<p>For example, to install the same model for <code class="language-plaintext highlighter-rouge">ocrd-cis-ocropy-recognize</code> as above:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd resmgr download -n https://github.com/chreul/OCR_Testdata_EarlyPrintedBooks/raw/master/LatinHist-98000.pyrnn.gz ocrd-cis-ocropy-recognize LatinHist.pyrnn.gz
</code></pre></div></div>

<p>Or to install a model for <code class="language-plaintext highlighter-rouge">ocrd-tesserocr-recognize</code> that is located at <code class="language-plaintext highlighter-rouge">https://my-server/mymodel.traineddata</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd resmgr download -n https://my-server/mymodel.traineddata ocrd-tesserocr-recognize mymodel.traineddata
</code></pre></div></div>

<p>This will download and store the resource in the <a href="#where-is-the-data">proper location</a> and create a stub entry in the
<a href="#user-database">user database</a>.  You can then use it as the parameter value for the <code class="language-plaintext highlighter-rouge">model</code> parameter:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd-tesserocr-recognize -P model mymodel
</code></pre></div></div>

<h3 id="models-and-docker">Models and Docker</h3>

<p>If you are using OCR-D with Docker, we recommend keeping all downloaded resources <strong>persistently</strong>
in a host directory, independent of both:</p>
<ul>
  <li>the Docker container’s internal storage (which is transient, i.e. any change over the image
gets lost with each new <code class="language-plaintext highlighter-rouge">docker run</code>),</li>
  <li>the host’s data directory (which may be on a different filesystem).</li>
</ul>

<p>That resource directory needs to be mounted into a specific path in the container, as does the data directory:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">/models</code>: resource files (to be mounted as a <strong>named volume</strong>, e.g. <code class="language-plaintext highlighter-rouge">-v ocrd-models:/models</code>),</li>
  <li><code class="language-plaintext highlighter-rouge">/data</code>: input/output files (to be mounted any way you like, probably a <strong>bind mount</strong>, e.g. <code class="language-plaintext highlighter-rouge">-v $PWD:/data</code>),</li>
  <li><code class="language-plaintext highlighter-rouge">/tmp</code>: temporary files (ideally as <strong>tmpfs</strong>, e.g. <code class="language-plaintext highlighter-rouge">--tmpfs /tmp</code>)</li>
</ul>

<p>Initially, (if you use a named volume, not a bind mount,) the host resource directory will contain only
those resources that have been <strong>pre-installed</strong> into the processors’ module directories. Each time you run
the Docker container, the Resource Manager and the processors will access that directory from the inside
to resolve resources, so you can <strong>download additional</strong> models into that location using <code class="language-plaintext highlighter-rouge">ocrd resmgr</code>, and
later <strong>use them</strong> in workflows.</p>

<p>The following will assume (without loss of generality) that your host-side data
path is under <code class="language-plaintext highlighter-rouge">./data</code>, and the host-side volume is called <code class="language-plaintext highlighter-rouge">ocrd-models</code>:</p>

<p>To download models to <code class="language-plaintext highlighter-rouge">ocrd-models</code> in the host FS and <code class="language-plaintext highlighter-rouge">/models</code> in the container FS:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--user</span> <span class="si">$(</span><span class="nb">id</span> <span class="nt">-u</span><span class="si">)</span> <span class="se">\</span>
  <span class="nt">--volume</span> ocrd-models:/models <span class="se">\</span>
  ocrd/all <span class="se">\</span>
  ocrd resmgr download ocrd-tesserocr-recognize eng.traineddata<span class="se">\;</span> <span class="se">\</span>
  ocrd resmgr download ocrd-calamari-recognize default<span class="se">\;</span> <span class="se">\</span>
  ...
</code></pre></div></div>

<p>To run processors, then as usual do:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--user</span> <span class="si">$(</span><span class="nb">id</span> <span class="nt">-u</span><span class="si">)</span> <span class="se">\</span>
  <span class="nt">--tmpfs</span> /tmp <span class="se">\</span>
  <span class="nt">--volume</span> <span class="nv">$PWD</span>/data:/data <span class="se">\</span>
  <span class="nt">--volume</span> ocrd-models:/models <span class="se">\</span>
  ocrd/all ocrd-tesserocr-recognize <span class="nt">-I</span> IN <span class="nt">-O</span> OUT <span class="nt">-P</span> model eng
</code></pre></div></div>

<p>This principle applies to all <code class="language-plaintext highlighter-rouge">ocrd/*</code> Docker images, e.g. you can replace <code class="language-plaintext highlighter-rouge">ocrd/all</code> above with <code class="language-plaintext highlighter-rouge">ocrd/tesserocr</code> as well.</p>

<h2 id="list-installed-resources">List installed resources</h2>

<p>The <code class="language-plaintext highlighter-rouge">ocrd resmgr list-installed</code> command has the same output format as <code class="language-plaintext highlighter-rouge">ocrd resmgr list-available</code>. But instead
of the database, it scans the filesystem locations <a href="#where-is-the-data">where data is searched</a> for existing
resources and lists URL and description if a database entry exists.</p>

<h2 id="user-database">User database</h2>

<p>Whenever the OCR-D/core resource manager encounters an unknown resource in the filesystem, or when you install
a resource with <code class="language-plaintext highlighter-rouge">ocrd resmgr download</code>, it will add a new stub entry in the user database, which is found at
<code class="language-plaintext highlighter-rouge">$XDG_CONFIG_HOME/ocrd/resources.yml</code> (where <code class="language-plaintext highlighter-rouge">$XDG_CONFIG_HOME</code> defaults to <code class="language-plaintext highlighter-rouge">$HOME/.config</code> if unset) and
gets created if it does not exist.</p>

<p>This allows you to use the OCR-D/core resource manager mechanics, including
lookup of known resources by name or URL, without relying (only) on the
database maintained by the OCR-D/core developers.</p>

<blockquote>
  <p><strong>Note</strong>: If you produced or found resources that are interesting for the wider
OCR(-D) community, please tell us in the <a href="https://gitter.im/OCR-D/Lobby">OCR-D gitter chat</a>
or open an issue in the respective Github repository, so we can add it to the database.</p>
</blockquote>

<h2 id="where-is-the-data">Where is the data</h2>

<p>The lookup algorithm is <a href="https://ocr-d.de/en/spec/ocrd_tool#file-parameters">defined in our specifications</a></p>

<p>In order of preference, a resource <code class="language-plaintext highlighter-rouge">&lt;name&gt;</code> for a processor <code class="language-plaintext highlighter-rouge">ocrd-foo</code> is searched at:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">$PWD/&lt;name&gt;</code></li>
  <li><code class="language-plaintext highlighter-rouge">$XDG_DATA_HOME/ocrd-resources/ocrd-foo/&lt;name&gt;</code></li>
  <li><code class="language-plaintext highlighter-rouge">/usr/local/share/ocrd-resources/ocrd-foo/&lt;name&gt;</code></li>
  <li><code class="language-plaintext highlighter-rouge">$VIRTUAL_ENV/lib/python3.6/site-packages/ocrd-foo/&lt;name&gt;</code> or <code class="language-plaintext highlighter-rouge">$VIRTUAL_ENV/share/ocrd-foo/&lt;name&gt;</code><br />
 (or whatever the processor’s internal module location is)</li>
</ul>

<p>(where <code class="language-plaintext highlighter-rouge">$XDG_DATA_HOME</code> defaults to <code class="language-plaintext highlighter-rouge">$HOME/.local/share</code> if unset).</p>

<p>We recommend using the <code class="language-plaintext highlighter-rouge">$XDG_DATA_HOME</code> location, which is also the default. But
you can override the location to store data with the <code class="language-plaintext highlighter-rouge">--location</code> option, which can
be <code class="language-plaintext highlighter-rouge">cwd</code>, <code class="language-plaintext highlighter-rouge">data</code>, <code class="language-plaintext highlighter-rouge">system</code> and <code class="language-plaintext highlighter-rouge">module</code> resp.</p>

<p>In Docker though, <code class="language-plaintext highlighter-rouge">$XDG_CONFIG_HOME=$XDG_DATA_HOME/ocrd-resources=/usr/local/share/ocrd-resources</code> 
gets symlinked to <code class="language-plaintext highlighter-rouge">/models</code> for easier volume handling (and persistency).</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># will download to $PWD/latest_net_G.pth</span>
ocrd resmgr download <span class="nt">--location</span> cwd ocrd-anybaseocr-dewarp latest_net_G.pth
<span class="c"># will download to /usr/local/share/ocrd-resources/ocrd-anybaseocr-dewarp/latest_net_G.pth</span>
ocrd resmgr download <span class="nt">--location</span> system ocrd-anybaseocr-dewarp latest_net_G.pth
</code></pre></div></div>

<h2 id="changing-the-default-resource-directory">Changing the default resource directory</h2>

<p>The <code class="language-plaintext highlighter-rouge">$XDG_DATA_HOME</code> default location is reasonable because
models are usually large files which should persist across different deployments,
both native and containerized, both single-module and <a href="https://github.com/OCR-D/ocrd_all">ocrd_all</a>.
Moreover, that variable can easily be overridden during installation.</p>

<p>However, there are use cases where <code class="language-plaintext highlighter-rouge">system</code> or even <code class="language-plaintext highlighter-rouge">cwd</code> should be
used as location to store resources, hence the <code class="language-plaintext highlighter-rouge">--location</code> option.</p>

<h2 id="notes-on-specific-processors">Notes on specific processors</h2>

<h2 id="ocropy--ocrd_cis">Ocropy / ocrd_cis</h2>

<p>An Ocropy model is simply the neural network serialized with Python’s pickle
mechanism and is generally distributed in a gzipped form, with a <code class="language-plaintext highlighter-rouge">.pyrnn.gz</code>
extension and can be used as such, no need to unarchive.</p>

<p>To use a specific model with OCR-D’s ocropus wrapper in
<a href="https://github.com/cisocrgroup/ocrd_cis">ocrd_cis</a> and more specifically, the
<code class="language-plaintext highlighter-rouge">ocrd-cis-ocropy-recognize</code> processor, use the <code class="language-plaintext highlighter-rouge">model</code> parameter:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd-cis-ocropy-recognize <span class="nt">-I</span> OCR-D-SEG-LINE <span class="nt">-O</span> OCR-D-OCR-OCRO <span class="nt">-P</span> model fraktur-jze.pyrnn.gz
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: The model must have been downloaded before with</p>
</blockquote>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd resmgr download ocrd-cis-ocropy-recognize fraktur-jze.pyrnn.gz
</code></pre></div></div>

<h2 id="calamari--ocrd_calamari">Calamari / ocrd_calamari</h2>

<p>Calamari models are Tensorflow model directories. For distribution, this
directory is usually packed to a tarball or ZIP file. Once downloaded, these
containers must be unpacked to a directory again. <code class="language-plaintext highlighter-rouge">ocrd resmgr</code> handles this
for you, so you just need the name of the resource in the database.</p>

<p>The Calamari-OCR project also maintains a <a href="https://github.com/Calamari-OCR/calamari_models">repository of models</a>.</p>

<p>To use a specific model with OCR-D’s calamari wrapper
<a href="https://github.com/OCR-D/ocrd_calamari">ocrd_calamari</a> and more specifically,
the <code class="language-plaintext highlighter-rouge">ocrd-calamari-recognize</code> processor, use the <code class="language-plaintext highlighter-rouge">checkpoint_dir</code> parameter:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># To use the "default" model, i.e. the one trained on GT4HistOCR by QURATOR</span>
ocrd-calamari-recognize <span class="nt">-I</span> OCR-D-SEG-LINE <span class="nt">-O</span> OCR-D-OCR-CALA
<span class="c"># To use your own trained model</span>
ocrd-calamari-recognize <span class="nt">-I</span> OCR-D-SEG-LINE <span class="nt">-O</span> OCR-D-OCR-CALA <span class="nt">-P</span> checkpoint_dir /path/to/modeldir
</code></pre></div></div>

<h2 id="tesseract--ocrd_tesserocr">Tesseract / ocrd_tesserocr</h2>

<p>Tesseract models are single files with a <code class="language-plaintext highlighter-rouge">.traineddata</code> extension.</p>

<p>Since Tesseract only supports model lookup in a single directory, 
and we want to share the tessdata directory with the standalone CLI,
<code class="language-plaintext highlighter-rouge">ocrd_tesserocr</code> resources must be stored in the <code class="language-plaintext highlighter-rouge">module</code> location.
If the default path of that location is not the place you want to use for Tesseract models,
then either recompile Tesseract with the <code class="language-plaintext highlighter-rouge">tessdata</code> path you had in mind,
or use the <code class="language-plaintext highlighter-rouge">TESSDATA_PREFIX</code> environment variable to override the <code class="language-plaintext highlighter-rouge">module</code> location at runtime.</p>

<p><strong>NOTE</strong>: For reasons of efficiency and to avoid duplicate models, all <code class="language-plaintext highlighter-rouge">ocrd-tesserocr-*</code> processors
re-use the resource directory for <code class="language-plaintext highlighter-rouge">ocrd-tesserocr-recognize</code>.</p>

<p>OCR-D’s Tesseract wrapper,
<a href="https://github.com/OCR-D/ocrd_tesserocr">ocrd_tesserocr</a> and more
specifically, the <code class="language-plaintext highlighter-rouge">ocrd-tesserocr-recognize</code> processor, expects the name of the
model(s) to be provided as the <code class="language-plaintext highlighter-rouge">model</code> parameter. Multiple models can be
combined by concatenating with <code class="language-plaintext highlighter-rouge">+</code> (which generally improves accuracy but always slows processing):</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Use the deu and deu_latf models</span>
ocrd-tesserocr-recognize <span class="nt">-I</span> OCR-D-SEG-LINE <span class="nt">-O</span> OCR-D-OCR-TESS <span class="nt">-P</span> model <span class="s1">'deu+deu_latf'</span>
<span class="c"># Use the Fraktur model</span>
ocrd-tesserocr-recognize <span class="nt">-I</span> OCR-D-SEG-LINE <span class="nt">-O</span> OCR-D-OCR-TESS <span class="nt">-P</span> Fraktur
</code></pre></div></div>

<h1 id="model-training">Model training</h1>

<p>With the pretrained models mentioned above, good results can be obtained for many originals. Nevertheless, the
recognition rate can usually be improved significantly by fine-tuning an existing model or even training a new
model on your own particular originals.</p>

<h2 id="tesstrain">Tesstrain</h2>

<p>For training Tesseract models, <a href="https://github.com/tesseract-ocr/tesstrain"><code class="language-plaintext highlighter-rouge">tesstrain</code></a> can be used. As it is
not included in <code class="language-plaintext highlighter-rouge">ocrd_all</code>, you will still have to install it, first. For information on the setup and the 
training process itself see the <a href="https://github.com/tesseract-ocr/tesstrain">Readme</a> in the GithHub Repository.</p>

<h2 id="okralact">okralact</h2>

<p>While <code class="language-plaintext highlighter-rouge">tesstrain</code> only allows you to train models for Tesseract, with <a href="https://github.com/OCR-D/okralact"><code class="language-plaintext highlighter-rouge">okralact</code></a>
you can train models for four engines compatible with OCR-D - namely Tesseract, Ocropus, Kraken and Calamari - at once. 
Especially if you want to use several OCR engines for your workflows or are not sure which OCR engine will give you the best
results, this might be particularly effective for you. Just like <code class="language-plaintext highlighter-rouge">tesstrain</code> it is not included in <code class="language-plaintext highlighter-rouge">ocrd_all</code>, meaning 
you will still have to install it, first. For information on the setup and the training process itself see the
<a href="https://github.com/OCR-D/okralact">Readme</a> in the GithHub Repository.</p>

<h1 id="further-reading">Further reading</h1>

<p>If you just installed OCR-D and want to know how to process your own data, please see the <a href="/en/user_guide">user guide</a>.</p>

      </main>
    </div><footer class="footer" style="padding: 1rem">
    <div class="content has-text-centered">
      <img class="footer-logo" src="/assets/dfg_logo_eng.jpg" alt="DFG logo"/>
    </div>
    <!-- <div class="content has-text-centered"> -->
    <!--   <img class="footer-logo" src="/assets/logo-bbaw.png" alt="BBAW logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-hab.gif" alt="HAB logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-kit.png" alt="KIT logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-sbb.png" alt="SBB logo"/> -->
    <!-- </div> -->
    <div class="content has-text-centered">
		<a href="https://github.com/OCR-D">GitHub</a>
		|
		<a href="https://gitter.im/OCR-D/Lobby">Gitter</a>
		|
		<a href="https://twitter.com/OCR_D_community">Twitter</a>
		|
		<a href="https://github.com/OCR-D/ocrd-website/wiki">Wiki</a>
		|
		<a href="https://hub.docker.com/u/ocrd">Docker Hub</a>
		|
		<a href="https://www.zotero.org/groups/418719/ocr-d">Technology Watch</a>
		|
		<a href="/sitemap.xml">sitemap.xml</a>
		|
		
			<a href="/en/imprint">Imprint</a>
		
    </div>

<script src="/assets/script.js"></script>
</footer>
</body>

</html>
