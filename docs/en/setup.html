<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="shortcut icon" href="https://avatars0.githubusercontent.com/u/26362587?s=200&amp;v=4"></link>
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/bulma.css"></link>
  <link rel="stylesheet" href="/assets/syntax-highlight.css"></link>
  <style>
  #swagger-ui pre.version {
    padding: 2px !important;
    background: initial !important;
  }
  #swagger-ui .topbar {
    display: none;
  }
  blockquote {
    background: #f99;
  }
  aside.menu > ul { 
    position: fixed;
    overflow-y: auto;
    height: calc(100vh - 150px);
  }
  body > #swagger-ui,
  body > .columns {
    margin-top: 55px;
  }
  h2 code, h3 code, h4 code {
    color: black;
  }
  .title-image  img {
    max-height: 300px;
  }

  /* hide banner and navbar of gt guidelines / pagexml docs */
  header[role="banner"] { display: none; }
  nav[role="toc"] { display: none; }
  footer[role="contentinfo"] { display: none; }

  /* hide stuff from sphinx docs */
  div.related[role="navigation"] { display: none; }
  div.footer[role="contentinfo"] { display: none; }

  </style>
</head>
<body><nav class="navbar is-transparent is-fixed-top">

  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="/assets/ocrd-logo-small.png" height="28"/>
    </a>
    <div class="navbar-burger burger" data-target="ocrd-navbar-menu">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div id="ocrd-navbar-menu" class="navbar-menu">
    <div class="navbar-start">
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/">About</a>
        <div class="navbar-dropdown">
          
          
          <a class="navbar-item" href="/en/about">The OCR-D-project</a>
          
          
          <a class="navbar-item" href="/en/contact">Get in touch!</a>
          
          
          <a class="navbar-item" href="/en/blog">Blog</a>
          
          
          <a class="navbar-item" href="/en/publications">Publications</a>
          
          
          <a class="navbar-item" href="/en/slides">Slides and presentations</a>
          
          
          <a class="navbar-item" href="/en/module-projects">Module Projects</a>
          
          
          <a class="navbar-item" href="/en/data">Data</a>
          
          
          <a class="navbar-item" href="/en/user_survey">User Survey</a>
          
          
          <a class="navbar-item" href="/en/imprint">Imprint</a>
          
        </div>
      </div>
      
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/dev">Developers</a>
        <div class="navbar-dropdown">
          
          
          <a class="navbar-item" href="/en/gt-guidelines/trans">Ground Truth Guidelines</a>
          
          
          <a class="navbar-item" href="/en/gt-guidelines/trans/trPage">PAGE-XML format documentation</a>
          
          
          <a class="navbar-item" href="/en/spec">Specifications</a>
          
          
          <a class="navbar-item" href="/core">OCR-D/core API Documentation</a>
          
        </div>
      </div>
      
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/use">Users</a>
        <div class="navbar-dropdown">
          
          
          <a class="navbar-item" href="/en/setup">Setup Guide</a>
          
          
          <a class="navbar-item" href="/en/user_guide">User Guide</a>
          
          
          <a class="navbar-item" href="/en/cookbook">Cookbook</a>
          
          
          <a class="navbar-item" href="/en/spec/glossary">Glossary</a>
          
        </div>
      </div>
      
      
      
      <a class="navbar-item" href="/en/faq">FAQ</a>
      
      

    </div>

    <div class="navbar-end">

      <span class="navbar-item">
          
      </span>

    </div> </div> </nav>
<div class="columns">
      
      <aside class="column is-one-third menu">
        <ul class="menu-list column is-one-third">
  <li><a href="#setup-guide-for-pilot-libraries">Setup guide for pilot libraries</a>
    <ul>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#ocrd_all">ocrd_all</a></li>
      <li><a href="#ocrd_all-via-docker">ocrd_all via Docker</a>
        <ul>
          <li><a href="#mini-medi-maxi">mini medi maxi</a></li>
          <li><a href="#fetch-docker-image">Fetch docker image</a></li>
          <li><a href="#updating-docker-image">Updating docker image</a></li>
          <li><a href="#translating-native-commands-to-docker-calls">Translating native commands to docker calls</a></li>
        </ul>
      </li>
      <li><a href="#ocrd_all-natively">ocrd_all natively</a>
        <ul>
          <li><a href="#prerequisites">Prerequisites</a></li>
          <li><a href="#cloning-the-repository">Cloning the repository</a></li>
          <li><a href="#installing-with-ocrd_all">Installing with ocrd_all</a></li>
          <li><a href="#updating-the-repository">Updating the repository</a></li>
        </ul>
      </li>
      <li><a href="#individual-installation">Individual installation</a>
        <ul>
          <li><a href="#individual-docker-container">Individual Docker container</a></li>
          <li><a href="#native-installation">Native installation</a>
            <ul>
              <li><a href="#virtualenv">virtualenv</a></li>
              <li><a href="#from-pypi">From PyPI</a></li>
              <li><a href="#from-git">From git</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#testing-the-installation">Testing the installation</a>
        <ul>
          <li><a href="#test-native-installation">Test native installation</a></li>
          <li><a href="#test-docker-installation">Test Docker installation</a></li>
        </ul>
      </li>
      <li><a href="#running-a-small-workflow">Running a small workflow</a>
        <ul>
          <li><a href="#with-pypi-and-workflow-engine-from-core">With PyPI and workflow engine from core</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

      </aside>
      

      <main class="container content column is-two-thirds" aria-label="Content">
        <h1 id="setup-guide-for-pilot-libraries">Setup guide for pilot libraries</h1>

<p>OCR-D’s software is a modular collection of many projects (called <em>modules</em>)
with many tools per module (called <em>processors</em>) that you can combine freely
to achieve the workflow best suited for OCRing your content.</p>

<p>All <a href="https://github.com/topics/ocr-d">OCR-D modules</a> follow the same
<a href="https://ocr-d.github.io/cli">interface</a> and common design patterns. So once
you understand how to install and use one project, you know how to install and
use all of them.</p>

<h2 id="installation">Installation</h2>

<p>There are three ways to install OCR-D modules:</p>

<ol>
  <li>Using the <a href="https://hub.docker.com/r/ocrd/all"><code class="highlighter-rouge">ocrd/all</code> Docker module collection</a> (<strong>recommended</strong>)</li>
  <li>Using <code class="highlighter-rouge">ocrd/all</code> to install OCR-D modules locally</li>
  <li>Installing modules indivudally via Docker or natively (not recommended)</li>
</ol>

<p>We recommend using the Docker image since this does not require any changes to
the host system besides <a href="https://hub.docker.com/r/ocrd/all">installing Docker</a>.</p>

<p>We do not recommend installing modules individually because it can be difficult to keep the
software up-to-date and ensure that they are at working and interoperable versions.</p>

<h2 id="ocrd_all">ocrd_all</h2>

<p>The <a href="https://github.com/OCR-D/ocrd_all"><code class="highlighter-rouge">ocrd_all</code></a> project is an effort by the
OCR-D community, now maintained by the OCR-D coordination team. It streamlines
the native installation of OCR-D modules with a versatile Makefile approach.
Besides allowing local installation of the full OCR-D stack, it is also the
base for the <a href="https://hub.docker.com/r/ocrd/all"><code class="highlighter-rouge">ocrd/all</code></a>
Docker images available from DockerHub that contain the full stack of OCR-D
modules ready for deployment.</p>

<p>Technically, <code class="highlighter-rouge">ocrd_all</code> is a Git repository that keeps all the necessary software
as Git submodules at specific revisions. This way, the software tools are known
to be at a stable version and guaranteed to be interoperable with one another.</p>

<h2 id="ocrd_all-via-docker">ocrd_all via Docker</h2>

<h3 id="mini-medi-maxi">mini medi maxi</h3>

<p>There are three versions of the
<a href="https://hub.docker.com/r/ocrd/all"><code class="highlighter-rouge">ocrd/all</code></a> image:
<code class="highlighter-rouge">minimum</code>, <code class="highlighter-rouge">medium</code> and <code class="highlighter-rouge">maximum</code>. They differ in which modules are included
and hence the size of the image. Only use the <code class="highlighter-rouge">minimum</code> or <code class="highlighter-rouge">medium</code> images if
you are certain that you do not need the full OCR-D stack for your workflows, otherwise
we encourage you to use the large but complete <code class="highlighter-rouge">maximum</code> image.</p>

<p>Check this table to see which modules are included in which version:</p>

<table>
  <thead>
    <tr>
      <th>Module</th>
      <th><code class="highlighter-rouge">minimum</code></th>
      <th><code class="highlighter-rouge">medium</code></th>
      <th><code class="highlighter-rouge">maximum</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>core</td>
      <td>☑</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_cis</td>
      <td>☑</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_im6convert</td>
      <td>☑</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_repair_inconsistencies</td>
      <td>☑</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_tesserocr</td>
      <td>☑</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>tesserocr</td>
      <td>☑</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>workflow-configuration</td>
      <td>☑</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>cor-asv-ann</td>
      <td>-</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>dinglehopper</td>
      <td>-</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>format-converters</td>
      <td>-</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_calamari</td>
      <td>-</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_keraslm</td>
      <td>-</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_olena</td>
      <td>-</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_segment</td>
      <td>-</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>tesseract</td>
      <td>-</td>
      <td>☑</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_anybaseocr</td>
      <td>-</td>
      <td>-</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_kraken</td>
      <td>-</td>
      <td>-</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_ocropy</td>
      <td>-</td>
      <td>-</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_pc_segmentation</td>
      <td>-</td>
      <td>-</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>ocrd_typegroups_classifier</td>
      <td>-</td>
      <td>-</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>sbb_textline_detector</td>
      <td>-</td>
      <td>-</td>
      <td>☑</td>
    </tr>
    <tr>
      <td>cor-asv-fst</td>
      <td>-</td>
      <td>-</td>
      <td>☑</td>
    </tr>
  </tbody>
</table>

<h3 id="fetch-docker-image">Fetch docker image</h3>

<p>To fetch the <code class="highlighter-rouge">maximum</code> version of the <code class="highlighter-rouge">ocrd/all</code> Docker image:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ocrd/all:maximum
</code></pre></div></div>

<p>Replace <code class="highlighter-rouge">maximum</code> accordingly if you want the <code class="highlighter-rouge">minimum</code> or <code class="highlighter-rouge">medium</code> variant.</p>

<p>If no specific version is chosen, <code class="highlighter-rouge">latest</code> is selected by default, which is equivalent to <code class="highlighter-rouge">medium</code>.</p>

<h3 id="updating-docker-image">Updating docker image</h3>

<p>To update the docker images to their latest version, just run the <code class="highlighter-rouge">docker pull</code> command again:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ocrd/all:&lt;version&gt;
</code></pre></div></div>

<p>This can even be set up as a cron-job to ensure the image is always up-to-date.</p>

<h3 id="translating-native-commands-to-docker-calls">Translating native commands to docker calls</h3>

<p>In the documentation, both of the <a href="https://ocr-d.github.io">OCR-D coordination
project</a> as well as the documentation of the
<a href="https://github.com/topics/ocr-d">individual OCR-D modules</a>, you will find
<em>native commands</em>, i.e. command line calls that expect the software to be
installed natively. These are simple to translate to commands based on the
docker images by prepending the boilerplate telling Docker which image to use,
which user to run as, which files to bind to a container path etc.</p>

<p>For example a call to
<a href="https://github.com/OCR-D/tesserocr"><code class="highlighter-rouge">ocrd-tesserocr-binarize</code></a> might natively
look like this:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd-tesserocr-segment-region <span class="nt">-I</span> OCR-D-IMG <span class="nt">-O</span> OCR-D-SEG-BLOCK
</code></pre></div></div>

<p>To run it with the [<code class="highlighter-rouge">ocrd/all:maximum</code>] Docker container:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-u</span> <span class="si">$(</span><span class="nb">id</span> <span class="nt">-u</span><span class="si">)</span> <span class="nt">-v</span> <span class="nv">$PWD</span>:/data <span class="nt">-w</span> /data <span class="nt">--</span> ocrd/all:maximum ocrd-tesserocr-segment-region <span class="nt">-I</span> OCR-D-IMG <span class="nt">-O</span> OCR-D-SEG-BLOCK
           <span class="se">\_</span>________/ <span class="se">\_</span>__________/ <span class="se">\_</span>_____/ <span class="se">\_</span>________________/ <span class="se">\_</span>__________________________________________________________/
              <span class="o">(</span>1<span class="o">)</span>          <span class="o">(</span>2<span class="o">)</span>         <span class="o">(</span>3<span class="o">)</span>          <span class="o">(</span>4<span class="o">)</span>                            <span class="o">(</span>5<span class="o">)</span>
</code></pre></div></div>

<ul>
  <li>(1) tells Docker to run the container as the calling user instead of root</li>
  <li>(2) tells Docker to bind the current working directory as the <code class="highlighter-rouge">/data</code> folder in the container</li>
  <li>(3) tells Docker to change the container’s working directory to <code class="highlighter-rouge">/data</code></li>
  <li>(4) tells docker which image to run</li>
  <li>(5) is the unchanged call to <code class="highlighter-rouge">ocrd-tesserocr-segment-region</code></li>
</ul>

<p>It can also be useful to delete the container after creation with the <code class="highlighter-rouge">--rm</code>
parameter.</p>

<h2 id="ocrd_all-natively">ocrd_all natively</h2>

<p>The <code class="highlighter-rouge">ocrd_all</code> project contains a sophisticated Makefile to install or compile
prerequisites as necessary, set up a virtualenv, install the core software,
install OCR-D modules and more. Detailed documentation <a href="https://github.com/OCR-D/ocrd_all">can be found in its
README</a>.</p>

<h3 id="prerequisites">Prerequisites</h3>

<p>There are some <a href="https://github.com/OCR-D/ocrd_all#system-packages">system requirements</a> for ocrd_all.</p>

<p>You need to have <code class="highlighter-rouge">git</code> and <code class="highlighter-rouge">make</code> installed to make use of <code class="highlighter-rouge">ocrd_all</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>git make
</code></pre></div></div>

<p>It is easiest to install all the possible system requirements by calling <code class="highlighter-rouge">make deps-ubuntu</code> as root:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>make deps-ubuntu
</code></pre></div></div>

<h3 id="cloning-the-repository">Cloning the repository</h3>

<p>Clone the repository and all its submodules:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">--recursive</span> https://github.com/OCR-D/ocrd_all
<span class="nb">cd </span>ocrd_all
</code></pre></div></div>

<h3 id="installing-with-ocrd_all">Installing with ocrd_all</h3>

<p>You can either install</p>
<ol>
  <li>all the software at once with the <code class="highlighter-rouge">all</code> target (equivalent to the <a href="#mini-medi-maxi"><code class="highlighter-rouge">maximum</code> Docker version</a>)</li>
  <li>modules individually by using an executable from that module as the target or :</li>
  <li>modules invidually by using the project name for the <code class="highlighter-rouge">OCRD_MODULES</code> variable:</li>
</ol>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make all                       <span class="c"># Installs all the software (recommended)</span>

make ocrd-tesserocr-binarize   <span class="c"># Installs ocrd_tesserocr which contains ocrd-tesserocr-binarize</span>
make ocrd-cis-ocropy-binarize  <span class="c"># Installs ocrd_cis  which contains ocrd-cis-ocropy-binarize</span>

make all <span class="nv">OCRD_MODULES</span><span class="o">=</span><span class="s2">"ocrd_tesserocr ocrd_cis"</span>  <span class="c"># Will install both ocrd_tesserocr and ocrd_cis</span>
</code></pre></div></div>

<h3 id="updating-the-repository">Updating the repository</h3>

<p>As <code class="highlighter-rouge">ocrd_all</code> is in <a href="https://github.com/OCR-D/ocrd_all/commits/master">active
development</a>, it is wise to
regularly update the repository and its submodules:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git pull
make modules                   <span class="c"># Updates all modules</span>
make core                      <span class="c"># Updates core</span>
</code></pre></div></div>

<h2 id="individual-installation">Individual installation</h2>

<p>With all variants of individual module installation, it will be up to you to
keep the repositories up-to-date and installed. We therefore discourage
individual installation of modules and recommend using ocrd_all as outlined above..</p>

<h3 id="individual-docker-container">Individual Docker container</h3>

<p>This is the best option if you want full control over which modules you
actually intend to use while still profiting from the simple installation of
Docker containers.</p>

<p>You need to have <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">Docker</a></p>

<p>All OCR-D modules are also <a href="https://hub.docker.com/u/ocrd">published as Docker containers to DockerHub</a>. To find the docker
image for a module, replace the <code class="highlighter-rouge">ocrd_</code> prefix with <code class="highlighter-rouge">ocrd/</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull ocrd/tesserocr  <span class="c"># Installs ocrd_tesserocr</span>
docker pull ocrd/olena  <span class="c"># Installs ocrd_olena</span>
</code></pre></div></div>

<p>To run the containers, please see <a href="#translating-native-commands-to-docker-calls">the notes on translating native command line
calls to docker calls above</a>. Make sure the image
name matches the executable. For example to run the same example in the dedicated <code class="highlighter-rouge">ocrd_tesserocr</code> container:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-u</span> <span class="si">$(</span><span class="nb">id</span> <span class="nt">-u</span><span class="si">)</span> <span class="nt">-w</span> /data <span class="nt">-v</span> <span class="nv">$PWD</span>:/data <span class="nt">--</span> ocrd/tesserocr ocrd-tesserocr-segment-region <span class="nt">-I</span> OCR-D-IMG <span class="nt">-O</span> OCR-D-SEG-BLOCK-DOCKER
</code></pre></div></div>

<h3 id="native-installation">Native installation</h3>

<blockquote>
  <p><strong>NOTE</strong></p>

  <p>ocrd_tesserocr requires <strong>tesseract-ocr &gt;= 4.1.0</strong>. But the Tesseract packages
bundled with <strong>Ubuntu &lt; 19.10</strong> are too old. If you are on Ubuntu 18.04 LTS,
please enable <a href="https://launchpad.net/~alex-p/+archive/ubuntu/tesseract-ocr">Alexander Pozdnyakov PPA</a>,
which has up-to-date builds of tesseract and its dependecies:</p>

  <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>add-apt-repository ppa:alex-p/tesseract-ocr
<span class="nb">sudo </span>apt-get update
</code></pre></div>  </div>
</blockquote>

<h4 id="virtualenv">virtualenv</h4>

<ul>
  <li><strong>Always install python modules into a virtualenv</strong></li>
  <li><strong>Never run <code class="highlighter-rouge">pip</code>/<code class="highlighter-rouge">pip3</code> as root</strong></li>
</ul>

<p>First install Python 3 and <code class="highlighter-rouge">venv</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>python3 python3-venv
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># If you haven't created the venv yet:</span>
python3 <span class="nt">-m</span> venv ~/venv
<span class="c"># Activate the venv</span>
<span class="nb">source</span> ~/venv/bin/activate
</code></pre></div></div>

<p>Once you have activated the virtualenv, you should see <code class="highlighter-rouge">(venv)</code> prepended to
your shell prompt.</p>

<h4 id="from-pypi">From PyPI</h4>

<p>This is the best option if you want to use the stable, released version of individual modules.</p>

<p>However, many modules require a number of non-Python (system) packages. For the
exact list of packages you need to look at the README of the module in
question. (If you are not on Ubuntu &gt;= 18.04, then your requirements may
deviate from that.)</p>

<p>For example to install <code class="highlighter-rouge">ocrd_tesserocr</code> from PyPI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>git python3 python3-pip python3-venv libtesseract-dev libleptonica-dev tesseract-ocr-eng tesseract-ocr wget
pip3 <span class="nb">install </span>ocrd_tesserocr
</code></pre></div></div>

<p>Many ocrd modules conventionally contain a Makefile with a <code class="highlighter-rouge">deps-ubuntu</code> target that can handle calls to <code class="highlighter-rouge">apt-get</code> for you:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>make deps-ubuntu
</code></pre></div></div>

<h4 id="from-git">From git</h4>

<p>This is the best option if you want to change the source code or install the latest, unpublished changes.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/OCR-D/ocrd_tesserocr
<span class="nb">cd </span>ocrd_tesserocr
<span class="nb">sudo </span>make deps-ubuntu <span class="c"># or manually with apt-get</span>
make deps             <span class="c"># or pip3 install -r requirements</span>
make <span class="nb">install</span>          <span class="c"># or pip3 install .</span>
</code></pre></div></div>

<p>If you intend to develop a module, it is best to install the module editable:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install</span> <span class="nt">-e</span> <span class="nb">.</span>
</code></pre></div></div>

<p>This way, you won’t have to reinstall after making changes.</p>

<h2 id="testing-the-installation">Testing the installation</h2>

<p>For example, let’s fetch a document from the <a href="https://ocr-d-repo.scc.kit.edu/api/v1/metastore/bagit/">OCR-D GT Repo</a>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget <span class="s1">'https://ocr-d-repo.scc.kit.edu/api/v1/dataresources/736a2f9a-92c6-4fe3-a457-edfa3eab1fe3/data/wundt_grundriss_1896.ocrd.zip'</span>
unzip wundt_grundriss_1896.ocrd.zip
<span class="nb">cd </span>data
</code></pre></div></div>

<h3 id="test-native-installation">Test native installation</h3>

<p>This section applies if you installed the software natively, either <a href="#ocrd_all-natively">via
<code class="highlighter-rouge">ocrd_all</code></a> or <a href="#native-installation">on a per-module basis</a>.</p>

<p>First, activate your venv:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Activate the venv</span>
<span class="nb">source</span> ~/venv/bin/activate
</code></pre></div></div>

<p>Let’s segment the images in file group <code class="highlighter-rouge">OCR-D-IMG</code> into regions (creating a
first <a href="https://github.com/PRImA-Research-Lab/PAGE-XML">PAGE-XML</a> file group
<code class="highlighter-rouge">OCR-D-SEG-BLOCK</code>):</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ocrd-tesserocr-segment-region <span class="nt">-I</span> OCR-D-IMG <span class="nt">-O</span> OCR-D-SEG-BLOCK
</code></pre></div></div>

<h3 id="test-docker-installation">Test Docker installation</h3>

<p>This section applies if you installed the software as docker container(s), either <a href="#ocrd_all-via-docker">via
<code class="highlighter-rouge">ocrd_all</code></a> or <a href="#individual-docker-container">on a per-module basis</a>.</p>

<p>You can spin up a docker container, mounting the current working directory like this:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-u</span> <span class="si">$(</span><span class="nb">id</span> <span class="nt">-u</span><span class="si">)</span> <span class="nt">-w</span> /data <span class="nt">-v</span> <span class="nv">$PWD</span>:/data <span class="nt">--</span> ocrd/all:maximum ocrd-tesserocr-segment-region <span class="nt">-I</span> OCR-D-IMG <span class="nt">-O</span> OCR-D-SEG-BLOCK-DOCKER
</code></pre></div></div>

<p>Note that the CLI is exactly the same, the only difference is the prefix to instruct Docker, as <a href="#mini-medi-maxi">explained above</a></p>

<h2 id="running-a-small-workflow">Running a small workflow</h2>

<h3 id="with-pypi-and-workflow-engine-from-core">With PyPI and workflow engine from core</h3>

<p>The <a href="https://github.com/OCR-D/core">core package</a> will be installed with every
OCR-D module package, but you can also install it manually:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3 <span class="nb">install </span>ocrd
</code></pre></div></div>

<p>Its CLI <code class="highlighter-rouge">ocrd</code> contains a simple workflow engine, available with the <code class="highlighter-rouge">ocrd process</code> command, which allows you to chain multiple OCR-D processor calls into simple sequential workflows.</p>

<p>For example, let’s combine the ocropy-based binarization of the
<a href="https://github.com/cisocrgroup/ocrd_cis">ocrd_cis</a> module project with the segmentation and recognition
in <a href="https://github.com/OCR-D/ocrd_tesserocr">ocrd_tesserocr</a>.</p>

<p>First, install ocrd_cis, too:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install ocrd_cis</span>
pip3 <span class="nb">install </span>ocrd_cis <span class="c"># with pip</span>
</code></pre></div></div>

<p>Next, install a suitable OCR model for Tesseract:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install OCR model into Tesseract datapath</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>tesseract-ocr-script-frak
</code></pre></div></div>

<p>Now we can define the workflow (as a list of processor calls in abbreviated
form, and a number of parameter files where defaults are insufficient):</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Create parameter files</span>
<span class="nb">echo</span> <span class="s1">'{ "model": "Fraktur" }'</span> <span class="o">&gt;</span> param-tess-fraktur.json

<span class="c"># Run workflow</span>
ocrd process <span class="se">\</span>
  <span class="s1">'cis-ocropy-binarize -I OCR-D-IMG -O OCR-D-SEG-PAGE'</span> <span class="se">\</span>
  <span class="s1">'tesserocr-segment-region -I OCR-D-SEG-PAGE -O OCR-D-SEG-BLOCK'</span> <span class="se">\</span>
  <span class="s1">'tesserocr-segment-line -I OCR-D-SEG-BLOCK -O OCR-D-SEG-LINE'</span> <span class="se">\</span>
  <span class="s1">'tesserocr-recognize -I OCR-D-SEG-LINE -O OCR-D-OCR-TESSEROCR -p param-tess-fraktur.json'</span> 
</code></pre></div></div>

      </main>
    </div><footer class="footer" style="padding: 1rem">
    <div class="content has-text-centered">
      <a href="https://github.com/OCR-D">GitHub</a>
      |
      <a href="https://gitter.im/OCR-D/Lobby">gitter</a>
      |
      <a href="https://github.com/OCR-D">Docker Hub</a>
      |
      <a href="/sitemap.xml">sitemap.xml</a>
    </div>

<script src="/assets/script.js"></script>
</footer>
</body>

</html>
