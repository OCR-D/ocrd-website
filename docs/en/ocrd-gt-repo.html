<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8"/>
  <title></title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="shortcut icon" href="https://avatars0.githubusercontent.com/u/26362587?s=200&amp;v=4"></link>
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/bulma.css"></link>
  <link rel="stylesheet" href="/assets/bulma-switch.min.css"></link>
  <link rel="stylesheet" href="/assets/syntax-highlight.css"></link>
  <link rel="stylesheet" href="/assets/ocrd.css"></link>
</head>
<body><nav class="navbar is-transparent is-fixed-top">

  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="/assets/ocrd-logo-small.png" height="28"/>
    </a>
    <div class="navbar-burger burger" data-target="ocrd-navbar-menu">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div id="ocrd-navbar-menu" class="navbar-menu">
    <div class="navbar-start">
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/">About</a>
        <div class="navbar-dropdown">
          

          
          

            
            <a class="navbar-item" href="/de/phase3">OCR-D Phase III</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/about">The OCR-D-project</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/contact">Get in touch!</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/blog">Blog</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/publications">Publications and Presentations</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/module-projects">Module Projects</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/data">Data</a>

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/initial-tests">Initial tests</a>
            

          

          

          
          

            
            <a class="navbar-item" href="/en/user_survey">User Survey</a>

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/imprint">Imprint</a>
            

          

          
        </div>
      </div>
      
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/dev">Developers</a>
        <div class="navbar-dropdown">
          

          
          

            
            <a class="navbar-item" href="/en/gt-guidelines/trans">Ground Truth Guidelines</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/gt-guidelines/trans/trPage">PAGE-XML format documentation</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/dev-best-practice">OCR-D development best practices</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/spec">Specifications</a>

          

          

          
          

            
            <a class="navbar-item" href="/core">OCR-D/core API Documentation</a>

          

          
        </div>
      </div>
      
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link" href="/en/use">Users</a>
        <div class="navbar-dropdown">
          

          
          
            
            
              
              <a class="navbar-item" href="/en/setup">Setup Guide</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/user_guide">User Guide</a>
            

          

          

          
          
            
            
              
              <a class="navbar-item" href="/en/workflows">Workflows</a>
            

          

          

          
          

            
            <a class="navbar-item" href="/en/models">Models</a>

          

          

          
          

            
            <a class="navbar-item" href="/en/spec/glossary">Glossary</a>

          

          
        </div>
      </div>
      
      
      
        <a class="navbar-item" href="/en/faq">FAQ</a>
      
      

    </div>

    <div class="navbar-end">

      <span class="navbar-item">
         
           
      </span>

    </div> </div> </nav>
<div class="columns">
      
      <aside id="toc-sidebar-content" class="column is-one-third menu is-hidden-mobile">
        <ul class="menu-list column is-one-third">
  <li><a href="#working-with-ocr-d-ground-truth-repository">Working with OCR-D-(Ground-Truth)-Repository</a>
    <ul>
      <li><a href="#upload-bagit-container-from-scratch-to-ocr-d-gt-repository">Upload bagit container from scratch to OCR-D(-GT)-Repository</a>
        <ul>
          <li><a href="#preparation-create-workspace">Preparation: Create Workspace</a>
            <ul>
              <li><a href="#activate-virtualenv">Activate virtualenv</a></li>
              <li><a href="#initialize-workspace">Initialize Workspace</a></li>
              <li><a href="#create-folder-for-scanned-page">Create Folder for Scanned Page</a></li>
              <li><a href="#download-image-google">Download Image (Google)</a></li>
              <li><a href="#add-image-to-workspace">Add Image to Workspace</a></li>
              <li><a href="#set-unique-id-for-workspace">Set Unique ID for Workspace</a></li>
              <li><a href="#validate-workspace">Validate Workspace</a></li>
            </ul>
          </li>
          <li><a href="#create-bagit-container">Create BagIt Container</a></li>
          <li><a href="#validate-bagit-container">Validate BagIt Container</a></li>
          <li><a href="#upload-bagit-container">Upload BagIt Container</a></li>
        </ul>
      </li>
      <li><a href="#download-all-bagit-containers">Download all BagIt Containers</a></li>
      <li><a href="#list-all-documents-in-browser">List all Documents (in Browser)</a></li>
      <li><a href="#download-document">Download Document</a></li>
      <li><a href="#list-all-files-inside-document">List all Files inside Document</a></li>
      <li><a href="#download-single-file">Download Single File</a></li>
      <li><a href="#list-metadata">List Metadata</a></li>
      <li><a href="#list-ground-truth-metadata">List Ground Truth Metadata</a></li>
      <li><a href="#search-inside-repository">Search Inside Repository</a>
        <ul>
          <li><a href="#search-via-browser">Search via browser</a></li>
          <li><a href="#search-on-command-line">Search on command line</a>
            <ul>
              <li><a href="#search-for-semantic-label">Search for Semantic Label</a></li>
              <li><a href="#search-for-documents-containing-multiple-semantic-labels-at-once">Search for Documents Containing Multiple Semantic Labels at Once</a></li>
              <li><a href="#search-for-documents-with-classification-fachtext">Search for Documents with Classification ‘Fachtext’</a></li>
              <li><a href="#search-for-documents-with-language-deu">Search for Documents with Language ‘deu’</a></li>
              <li><a href="#search-for-documents-with-identifier-16488">Search for Documents with Identifier ‘16488’</a></li>
              <li><a href="#search-for-documents-with-specific-identifier-and-type">Search for Documents with Specific Identifier and Type</a></li>
            </ul>
          </li>
          <li><a href="#download-selected-bagit-containers">Download selected BagIt Containers</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#get-all-containers">Get all containers</a></li>
  <li><a href="#get-ids-of-fitting-containers">Get IDs of fitting containers</a></li>
</ul>

      </aside>
      <div id="toc-sidebar-toggle">&lt;&gt;</div>
      

      <main class="container content column is-two-thirds" aria-label="Content">
        <h1 id="working-with-ocr-d-ground-truth-repository">Working with OCR-D-(Ground-Truth)-Repository</h1>

<h2 id="upload-bagit-container-from-scratch-to-ocr-d-gt-repository">Upload bagit container from scratch to OCR-D(-GT)-Repository</h2>
<p>Example to upload a scanned page to OCR-D-Repo.</p>
<h3 id="preparation-create-workspace">Preparation: Create Workspace</h3>
<p>Requirements: ocrd (Version 1.0.0) <a href="http://kba.cloud/2019-03-25-dhd/setup-time">See Setup OCR-D Stack</a></p>
<h4 id="activate-virtualenv">Activate virtualenv</h4>
<pre><code class="language-bash=bash">user@hostname:~$source ~/env-ocrd/bin/activate
(env-ocrd) user@hostname:~$
</code></pre>

<h4 id="initialize-workspace">Initialize Workspace</h4>
<pre><code class="language-bash=bash">(env-ocrd) user@hostname:~$ ocrd workspace init communist_manifesto
(env-ocrd) user@hostname:~$ cd communist_manifesto
</code></pre>
<h4 id="create-folder-for-scanned-page">Create Folder for Scanned Page</h4>

<pre><code class="language-bash=bash">(env-ocrd) user@hostname:~/communist_manifesto$ mkdir OCR-D-IMG
</code></pre>

<h4 id="download-image-google">Download Image (Google)</h4>

<pre><code class="language-bash=bash">(env-ocrd) user@hostname:~/communist_manifesto$ wget https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Manifesto_of_the_Communist_Party.djvu/page15-2745px-Manifesto_of_the_Communist_Party.djvu.jpg -O OCR-D-IMG/OCR-D-IMG_0015.jpg
</code></pre>
<h4 id="add-image-to-workspace">Add Image to Workspace</h4>

<pre><code class="language-bash=bash">(env-ocrd) user@hostname:~/communist_manifesto$ ocrd workspace add -g P0015 -G OCR-D-IMG -i OCR-D-IMG_0015 -m image/jpg OCR-D-IMG/OCR-D-IMG_0015.jpg
</code></pre>
<h4 id="set-unique-id-for-workspace">Set Unique ID for Workspace</h4>

<pre><code class="language-bash=bash">(env-ocrd) user@hostname:~/communist_manifesto$ ocrd workspace set-id 'communist_manifesto'
</code></pre>
<h4 id="validate-workspace">Validate Workspace</h4>
<p>For some images, the resolution of the image is not set. To avoid validation errors, the resolution check is skipped.
For further details see ‘ocrd workspace validate –help’.</p>
<pre><code class="language-bash=bash">(env-ocrd) user@hostname:~/communist_manifesto$ ocrd workspace validate --skip pixel_density mets.xml
</code></pre>
<h3 id="create-bagit-container">Create BagIt Container</h3>

<pre><code class="language-bash=bash">(env-ocrd) user@hostname:~/communist_manifesto$ cd ..
(env-ocrd) user@hostname:~/$ ocrd zip bag -i communist_manifesto -d communist_manifesto/
</code></pre>

<h3 id="validate-bagit-container">Validate BagIt Container</h3>

<pre><code class="language-bash=bash">(env-ocrd) user@hostname:~/$ ocrd zip validate communist_manifesto.ocrd.zip
[...]
OK
</code></pre>
<h3 id="upload-bagit-container">Upload BagIt Container</h3>

<pre><code class="language-bash=bash">user@hostname:~/$ curl -u ingest:GENERATED_PASSWORD -v -F "file=@communist_manifesto.ocrd.zip" http://localhost:8080/api/v1/metastore/bagit 
[...]
OK
</code></pre>
<h2 id="download-all-bagit-containers">Download all BagIt Containers</h2>
<pre><code class="language-bash=bash">user@hostname:~/Download$ wget -O listOfContainers.json https://ocr-d-repo.scc.kit.edu/api/v1/metastore/bagit

user@hostname:~/Download$ ocrdzips=$(cat listOfContainers.json | tr ",[]\"" "\n")

user@hostname:~/Download$ for addr in $ocrdzips
do
  wget $addr
  filename=$(basename -- "$addr")
  directory="${filename%.*}"

  mkdir $directory
  cd $directory
  unzip ../$filename
  cd ..
done
</code></pre>

<h2 id="list-all-documents-in-browser">List all Documents (in Browser)</h2>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/bagit
The list shows all ingested documents with its</p>
<ul>
  <li>‘<strong><em>Upload Date</em></strong>’</li>
  <li>‘<strong><em>Version</em></strong>’</li>
  <li>‘<strong><em>OCR-D Identifier</em></strong>’</li>
  <li>‘<strong><em>Link for Download</em></strong>’</li>
  <li>‘<strong><em>Referenced Files</em></strong>’</li>
  <li>‘<strong><em>Metadata</em></strong>’</li>
  <li>and ‘<strong><em>Semantic Labeling</em></strong>’
(Upload is only available for authorized users)</li>
</ul>

<h2 id="download-document">Download Document</h2>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/dataresources/71e19490-343a-4d68-a5a7-7cf4c725c843/data/arent_dichtercharaktere_1885.zip
Download of the complete document as bagit container.</p>

<h2 id="list-all-files-inside-document">List all Files inside Document</h2>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/mets/71e19490-343a-4d68-a5a7-7cf4c725c843/files
All files of given resourceID referenced inside the mets.xml are listed here.</p>

<h2 id="download-single-file">Download Single File</h2>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/dataresources/71e19490-343a-4d68-a5a7-7cf4c725c843/data/bagit/data/DEFAULT/DEFAULT_0002
Download/view single file (Tiff) of given resourceID, file group and fileID.</p>

<h2 id="list-metadata">List Metadata</h2>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/mets/71e19490-343a-4d68-a5a7-7cf4c725c843/metadata
List metadata of the document (e.g.: title, author, year, identifier, languages, classifications) of given resourceID.</p>
<h2 id="list-ground-truth-metadata">List Ground Truth Metadata</h2>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/mets/71e19490-343a-4d68-a5a7-7cf4c725c843/groundtruth
List all semantic labels of given resourceID.</p>

<h2 id="search-inside-repository">Search Inside Repository</h2>
<p>All searches will return a list of fitting resourceIDs. In order to further investigate the found resources, the listings above can be used.</p>
<h3 id="search-via-browser">Search via browser</h3>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/bagit/search</p>
<h3 id="search-on-command-line">Search on command line</h3>
<h4 id="search-for-semantic-label">Search for Semantic Label</h4>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/mets/labeling?label=condition/acquisition/method-flaws/imaging/uneven-illumination
Search for documents with e.g. uneven illumination.</p>

<h4 id="search-for-documents-containing-multiple-semantic-labels-at-once">Search for Documents Containing Multiple Semantic Labels at Once</h4>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/mets/labeling?label=condition/acquisition/method-flaws/imaging/uneven-illumination,condition/acquisition/content-or-background/included-objects/preceeding-or-proceeding</p>

<h4 id="search-for-documents-with-classification-fachtext">Search for Documents with Classification ‘Fachtext’</h4>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/mets/classification?class=Fachtext</p>

<h4 id="search-for-documents-with-language-deu">Search for Documents with Language ‘deu’</h4>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/mets/language?lang=deu</p>

<h4 id="search-for-documents-with-identifier-16488">Search for Documents with Identifier ‘16488’</h4>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/mets/identifier?identifier=16529</p>

<h4 id="search-for-documents-with-specific-identifier-and-type">Search for Documents with Specific Identifier and Type</h4>
<p>https://ocr-d-repo.scc.kit.edu/api/v1/metastore/mets/identifier?identifier=urn:nbn:de:kobv:b4-200905196929&amp;type=urn
Search for document with specific identifier of a specific type.
Possible types are:</p>
<ul>
  <li>purl</li>
  <li>urn</li>
  <li>handle</li>
  <li>url</li>
  <li>dtaid</li>
  <li>…
    <h3 id="download-selected-bagit-containers">Download selected BagIt Containers</h3>
    <p>E.g.: All with Classification ‘Belletristik’
```bash=bash</p>
    <h1 id="get-all-containers">Get all containers</h1>
    <p>user@hostname:~/Download$ wget -O listOfAllContainers.json https://ocr-d-repo.scc.kit.edu/api/v1/metastore/bagit</p>
  </li>
</ul>

<table>
  <tbody>
    <tr>
      <td>user@hostname:~/Download$ allocrdzips=$(cat listOfAllContainers.json</td>
      <td>tr “,[]"” “\n”)</td>
    </tr>
  </tbody>
</table>

<h1 id="get-ids-of-fitting-containers">Get IDs of fitting containers</h1>
<p>user@hostname:~/Download$ wget -O filteredList.json https://ocr-d-repo.scc.kit.edu/api/v1/metastore/mets/classification?class=Belletristik</p>

<table>
  <tbody>
    <tr>
      <td>user@hostname:~/Download$ filteredIds=$(cat filteredList.json</td>
      <td>tr “,[]"” “\n”)</td>
    </tr>
  </tbody>
</table>

<p>user@hostname:~/Download$ for bagitid in $filteredIds
do
  for addr in $allocrdzips
  do
    if echo “$addr” | grep -q “$bagitid”; then
      wget $addr
      filename=$(basename – “$addr”)
      directory=”${filename%.*}”</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  mkdir $directory
  cd $directory
  unzip ../$filename
  cd ..
fi   done done ```
</code></pre></div></div>


      </main>
    </div><footer class="footer" style="padding: 1rem">
    <div class="content has-text-centered">
      <img class="footer-logo" src="/assets/dfg_logo_eng.jpg" alt="DFG logo"/>
    </div>
    <!-- <div class="content has-text-centered"> -->
    <!--   <img class="footer-logo" src="/assets/logo-bbaw.png" alt="BBAW logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-hab.gif" alt="HAB logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-kit.png" alt="KIT logo"/> -->
    <!--   <img class="footer-logo" src="/assets/logo-sbb.png" alt="SBB logo"/> -->
    <!-- </div> -->
    <div class="content has-text-centered">
      <a href="https://github.com/OCR-D">GitHub</a>
      |
      <a href="https://gitter.im/OCR-D/Lobby">gitter</a>
      |
      <a href="https://github.com/OCR-D/ocrd-website/wiki">Wiki</a>
      |
      <a href="https://hub.docker.com/u/ocrd">Docker Hub</a>
      |
      <a href="https://www.zotero.org/groups/418719/ocr-d">Technology Watch</a>
      |
      <a href="/sitemap.xml">sitemap.xml</a>
    </div>

<script src="/assets/script.js"></script>
</footer>
</body>

</html>
