I"ä:<h1 id="ocr-d-ground-truth-praxis">OCR-D Ground Truth Praxis</h1>

<p>Repository-URL: https://ocr-d-repo.scc.kit.edu/api/v1/metastore/bagit</p>

<h2 id="werkzeuge">Werkzeuge</h2>
<blockquote>
  <p><strong>Transkribus</strong>
Transkribus ist eine Werkzeug mit der auf Basis des PAGE-Formates Transkribtionen erstellt werden k√∂nnen. Diese Transkribtionen  k√∂nnen f√ºr das Training von Texterkennungs-Software genutzt werden.</p>
</blockquote>

<p><img src="https://i.imgur.com/rM2L3wm.jpg" alt="" /></p>

<blockquote>
  <p><strong>Aletheia</strong>
Aletheia ist die Refenenzsoftware des am PRIma-LAB (Pattern Recognition &amp; Image Analysis Research Lab) entwickelten PAGE-Formates. Mit dieser Software werden Transkribtionen erstellt, die f√ºr das Training von Texterkennungs-Software genutzt werden k√∂nnen.</p>
</blockquote>

<p><img src="https://i.imgur.com/7nSq9J2.jpg" alt="" /></p>

<p>Beide Werkzeuge k√∂nnen f√ºr die Erstellung von Ground Truth genutzt werden.</p>

<h3 id="guidelines">Guidelines</h3>
<h4 id="ocr-d-groundtruth-guidelines">OCR-D GroundTruth Guidelines</h4>
<p>Pr√§sentation: https://ocr-d.github.io/gt/trans_documentation/index.html
Dokumentation: https://github.com/OCR-D/gt-guidelines</p>

<h4 id="page-xml">Page-XML</h4>
<p>Dokumentation zum PAGE XML Format for Page Content im Rahmen von OCR-D
https://ocr-d.github.io/gt/trans_documentation/trPage.html
GitHub: https://github.com/PRImA-Research-Lab/PAGE-XML</p>

<h4 id="tools-und-helferlein">Tools und Helferlein</h4>
<p><strong>Tanskribus</strong> 
Software: https://transkribus.eu
Kurz-Hilfe: https://transkribus.eu/wiki/images/c/cf/Transkribus_in_10_Schritten.pdf</p>

<p><strong>Aletheia</strong>
Software: https://www.primaresearch.org/tools/Aletheia/Editions
~Hinweis~ Es liegt nur eine Windows-Version vor.</p>

<p><strong>makeAletheia_mets</strong>
Erstellung einer Mets-Datei (Page Collections-Datei), um einfach mit Aletheia zu arbeiten.
https://github.com/tboenig/makeAletheia_mets</p>

<p><strong>Transkribus_mets2Aletheia_mets</strong>
Konvertierung einer vorhandenen Transkribus-METS-Datei in eine  Aletheia-METS-Datei.
https://github.com/tboenig/Transkribus_mets2Aletheia_mets</p>

<h1 id="workshop">Workshop</h1>

<h2 id="aufgabe">Aufgabe:</h2>
<ol>
  <li><strong>Arbeiten in Transkribus:</strong> Erstellung von GroundTruth auf Basis von Digitalisaten
    <ul>
      <li>Erstellung einer Transkribtion und der Zuordnung von Seitenregionen.</li>
    </ul>
  </li>
  <li><strong>Arbeiten in Altheia:</strong> Bearbeitung in Aletheia
    <ul>
      <li><strong>Alternative Aufgabe:</strong> √ñffnen der Datei im PAGE-Viewer</li>
    </ul>
  </li>
  <li><strong>Arbeiten mit dem GT-OCR-D Repositorium:</strong> Download und Bearbeitung von GroundTruth aus dem GT-OCR-D Repositorium.</li>
</ol>

<h3 id="aufgabe-1">Aufgabe 1:</h3>

<p>Voraussetzung: installierter Transkribus (https://transkribus.eu/Transkribus/)
~Hinweis:~ Dazu ist ein Acount bei Transkribus notwendig.</p>

<ul>
  <li>Starten Sie Transkribus und loggen Sie sich ein.</li>
  <li>√ñffnen Sie die Collection <code class="language-plaintext highlighter-rouge">OCR-D_DHD2019</code> Collection.</li>
  <li>Sie finden darin: <code class="language-plaintext highlighter-rouge">a_gehema_feldapotheke_1688_3</code>, √ñffnen Sie das Dokument.
    <blockquote>
      <p><img src="https://i.imgur.com/7YGWKQa.jpg" alt="" /></p>
    </blockquote>
  </li>
  <li>Das PAGE-Format bietet eine strukturelle Transkribtion von Regionen -&gt; Zeilen -&gt; W√∂rtern an. [Zeichen(Glyphen) k√∂nnen ebenfalls mit PAGE transkibiert werden.]
    <blockquote>
      <p><img src="https://i.imgur.com/fHhZwRN.png" alt="" /></p>
    </blockquote>
  </li>
  <li>Reduzieren Sie die Anzeigen nur auf die Zeilenebene.</li>
</ul>

<blockquote>
  <p><img src="https://i.imgur.com/ZPXHiyv.png" alt="" /></p>
</blockquote>

<ul>
  <li>Klicken Sie die erste Zeile an und beginnen Sie mit der Transkribtion des Textes.</li>
</ul>

<blockquote>
  <p><img src="https://i.imgur.com/yQM0X9N.jpg" alt="" /></p>
</blockquote>

<ul>
  <li>Zeichen die sich au√üerhalb des Tastaturlayouts befinden, k√∂nnen Sie durch das <code class="language-plaintext highlighter-rouge">Virtual keyboard</code> eingeben.</li>
</ul>

<blockquote>
  <p><img src="https://i.imgur.com/1aWmXgo.png" alt="" /></p>
</blockquote>

<ul>
  <li>Neben der Transkribtion ist die Markierung und Klassifizierung der Seitenregionen vorzunehmen.
siehe: https://ocr-d.github.io/gt//trans_documentation/lyTextregionen.html</li>
  <li>Folgende Regionen sind zu unterscheiden:
    <ul>
      <li>Textregion : TextRegion,</li>
      <li>Abbildungen, Fotos : ImageRegion,</li>
      <li>Buchschmuck, Zeichnungen : GraphicRegion,</li>
      <li>Trennlinien, Separatoren : SeparatorRegion,</li>
      <li>Tabellen : TableRegion,</li>
      <li>Strichzeichnungen : LineDrawingRegion,</li>
      <li>Mathematische Formeln : MathsRegion,</li>
      <li>Chemische Formeln : ChemRegion,</li>
      <li>Noten : MusicRegion,</li>
      <li>Werbung : AdvertRegion und</li>
      <li>Schmutz, Verf√§rbungen, Rauschen : NoiseRegion</li>
    </ul>
  </li>
  <li>Diese Regionen sind unter dem Metadaten-&gt;Structural zu finden.
    <blockquote>
      <p><img src="https://i.imgur.com/4cAL64o.jpg" alt="" /></p>
    </blockquote>
  </li>
  <li>Zum Abschluss der Arbeiten exportieren Sie Ihren Ground Truth.
    <blockquote>
      <p><img src="https://i.imgur.com/vm5biCO.png" alt="" /></p>
    </blockquote>
  </li>
</ul>

<h3 id="aufgabe-2">Aufgabe 2:</h3>

<p>Um den GroundTruth aus Transkribus in Aletheia zu bearbeiten, kann die zur Verf√ºgung gestellte METS-Datei genutzt werden. Jedoch mu√ü diese in das Aletheia-Format konvertiert werden.</p>

<p><strong>Allgemeine Informationen zu METS:</strong> https://de.wikipedia.org/wiki/Metadata_Encoding_%26_Transmission_Standard
<strong>METS-Standard:</strong> http://www.loc.gov/standards/mets/
<strong>Voraussetzung:</strong> Der <em>SAXON : The XSLT and XQuery Processor</em> ist auf Ihrem Rechner installiert.</p>

<ul>
  <li>Laden Sie sich die entsprechenden Tools (XSL-Transformation) von https://github.com/tboenig/Transkribus_mets2Aletheia_mets herunter</li>
  <li>Entpacken Sie die Zip-Datei.</li>
  <li>√ñffnen Sie die Kommandozeile/Terminal
    <ul>
      <li><strong>Windows</strong>:
        <ul>
          <li>Tippen Sie in das <em>Programm-Suche-Feld</em>: <code class="language-plaintext highlighter-rouge">cmd</code> ein. Es √∂ffnet sich ein DOS/Windows Terminal. In diesem k√∂nnen Sie mit dem SAXON Processor arbeiten.</li>
          <li>Nutzen Sie Ihr Linux-Sub-System (Betrifft nur Nutzer von Windows10).
            <ul>
              <li>Starten Sie die Linux-App.</li>
              <li>Um Zugriff auf die Dateien Ihres Rechners zu bekommen nutzen Sie in Ihrem Linux-Subsystem das Kommando <code class="language-plaintext highlighter-rouge">cd</code> f√ºr <em>Change Directory</em> m <code class="language-plaintext highlighter-rouge">cd /mnt/[Laufwerks-Angabe]/Users/Path zu den entsprechenden Ordnern/Dateien</code></li>
            </ul>
          </li>
          <li>F√ºr beide Systemvarianten gilt, passen Sie den Kommandozeilenaufruf an Ihr Dateisystem an.
            <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java <span class="nt">-jar</span> ../saxon9he.jar <span class="nt">-xsl</span>:../xsl/Transkribus_mets2Aletheia_mets.xsl <span class="nt">-s</span>:../example/mets.xml <span class="nt">-o</span>: ../example/mets_aletheia.metsx
</code></pre></div>            </div>
          </li>
          <li>Schreiben Sie den angpassten Kommandozeilenaufruf in das Kommandozeilenfenster/Terminal und starten Sie die Transformation durch dr√ºcken der Eingabetaste (Returntaste).</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Linux</strong>
    <ul>
      <li>√ñffnen Sie einen Terminal</li>
      <li>Passen Sie den Kommandozeilenaufruf an Ihr Dateisystem an.
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java -jar ../saxon9he.jar -xsl:../xsl/Transkribus_mets2Aletheia_mets.xsl -s:../example/mets.xml -o: ../example/mets_aletheia.metsx
</code></pre></div>        </div>
      </li>
      <li>Schreiben Sie den angepassten Kommandozeilenaufruf in das Kommandozeilenfenster/Terminal und starten Sie die Transformation durch dr√ºcken der Eingabetaste (Returntaste oder Entertaste).</li>
    </ul>
  </li>
</ul>

<p>Hinweis: Wo ist meine Eingabetaste (Returntaste oder Entertaste)?
https://upload.wikimedia.org/wikipedia/commons/a/a5/Enter.png</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>kurze Erkl√§rung</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-xsl:</td>
      <td>Angabe des XSL-Datei.</td>
    </tr>
    <tr>
      <td>-s:</td>
      <td>Angabe der Datei die transformiert werden soll.</td>
    </tr>
    <tr>
      <td>-o:</td>
      <td>Angabe der Ausgabedatei.</td>
    </tr>
  </tbody>
</table>

<h3 id="alternative-aufgabe-2">Alternative Aufgabe 2:</h3>

<p>Eine PAGE-Datei kann auch im PAGE-Viewer angezeigt werden. Dazu ist eine valide PAGE-Datei notwendig.
Zur Zeit werden PAGE-Dateien in Transkribus mit einigen Erweiterungen ausgeliefert, die zum PAGE-Schema nicht konform sind.
Deshalb m√ºssen diese Erweiterungen vor dem √ñffnen mit dem PAGE-Viewer zum Beispiel manuell entfernt werden.</p>

<p>Ausschnitt aus der PAGE-Datei von Transkribus:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="nt">&lt;PcGts</span> <span class="na">xmlns=</span><span class="s">"http://schema.primaresearch.org/PAGE/gts/pagecontent/2013-07-15"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://schema.primaresearch.org/PAGE/gts/pagecontent/2013-07-15 http://schema.primaresearch.org/PAGE/gts/pagecontent/2013-07-15/pagecontent.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Metadata&gt;</span>
        <span class="nt">&lt;Creator&gt;</span>OCR_D<span class="nt">&lt;/Creator&gt;</span>
        <span class="nt">&lt;Created&gt;</span>2016-09-20T13:04:41.875+02:00<span class="nt">&lt;/Created&gt;</span>
        <span class="nt">&lt;LastChange&gt;</span>2018-04-23T12:49:58.191+02:00<span class="nt">&lt;/LastChange&gt;</span>
        <span class="nt">&lt;Comments&gt;</span>
                Measurement unit: pixel
                PrimaryLanguage: German
                Language: GermanStandard
                Producer: ABBYY FineReader Engine 11<span class="nt">&lt;/Comments&gt;</span>
        <span class="nt">&lt;TranskribusMetadata</span> <span class="na">docId=</span><span class="s">"6557"</span> <span class="na">pageId=</span><span class="s">"213761"</span> <span class="na">pageNr=</span><span class="s">"1"</span> <span class="na">tsid=</span><span class="s">"3193617"</span> <span class="na">status=</span><span class="s">"GT"</span> <span class="na">userId=</span><span class="s">"2082"</span> <span class="na">imgUrl=</span><span class="s">"..."</span> <span class="na">xmlUrl=</span><span class="s">"..."</span> <span class="na">imageId=</span><span class="s">"205160"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/Metadata&gt;</span>
    [...]
<span class="nt">&lt;/PcGts&gt;</span>
</code></pre></div></div>

<p>Der Eintrag:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;TranskribusMetadata</span> <span class="na">docId=</span><span class="s">"6557"</span> <span class="na">pageId=</span><span class="s">"213761"</span> <span class="na">pageNr=</span><span class="s">"1"</span> <span class="na">tsid=</span><span class="s">"3193617"</span> <span class="na">status=</span><span class="s">"GT"</span> <span class="na">userId=</span><span class="s">"2082"</span> <span class="na">imgUrl=</span><span class="s">"..."</span> <span class="na">xmlUrl=</span><span class="s">"..."</span> <span class="na">imageId=</span><span class="s">"205160"</span><span class="nt">/&gt;</span>
</code></pre></div></div>
<p>ist zu l√∂schen.</p>

<ul>
  <li>Laden Sie eine Transkribus-PAGE-Datei in einen Text oder XML-Editor.</li>
  <li>Markieren und l√∂schen Sie die gesamten Zeile: <code class="language-plaintext highlighter-rouge">&lt;TranskribusMetadata...</code></li>
  <li>Speichern Sie Datei unter einem neuen Namen zum Beispiel: [alter Name]_PAGEViewer.xml</li>
  <li>√ñffnen Sie den PAGE-Viewer und laden Sie die bearbeitete PAGE-Datei in den Viewer.</li>
</ul>

<blockquote>
  <p><img src="https://i.imgur.com/heKtm4i.jpg" alt="" /></p>
</blockquote>

<h3 id="aufgabe-3">Aufgabe 3:</h3>

<p>Das OCR-D-GT-Repositorium speichert, verwaltet und archiviert GroundTruth-Daten. F√ºr das Training und f√ºr die Evaluation k√∂nnen aus diesem Repositorium entsprechende Daten verwendet werden. Aber auch GroundTruth-Daten die in verschiedenen Kontexten erstellt wurden k√∂nnen in diesem Repositorium gespeichert und archiviert werden. M√∂chten Sie Ihren GroundTruth-Korpus zur Verf√ºgung stellen dann nehmen Sie mit OCR-D Kontakt auf. Schreiben Sie eine E-Mail an ocrd@bbaw.de.</p>

<ul>
  <li>√ñffnen Sie die Webseite: https://ocr-d-repo.scc.kit.edu/api/v1/metastore/bagit.</li>
  <li>In der Tabelle w√§hlen Sie die erste Zeile aus und clicken Sie auf den Link zur zip-Datei in der Spalte URL.
<code class="language-plaintext highlighter-rouge">https://ocr-d-repo.scc.kit.edu/api/v1/dataresources/f15fb8c8-3842-4314-9a44-5e8b472d7bfc/data/buerger_gedichte_1778.ocrd.zip</code>
<img src="https://i.imgur.com/GVOYo6I.png" alt="" /></li>
  <li>Speichern und entpacken Sie die zip-Datei</li>
  <li>Starten Sie den PAGE-Viewer</li>
  <li>Laden Sie eine PAGE-Datei, die sich im Ordner: <code class="language-plaintext highlighter-rouge">buerger_gedichte_1778.ocrd-1/data/OCR-D-GT-SEG-BLOCK</code></li>
  <li>Da die Dateien keine Dateiendungen besitzen, werden Sie im Datei-√ñffnen-Fenster zuerst nicht angezeigt.</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Windows-Explorer-Ansicht</th>
      <th>Datei-√ñffnen-Fenster im PAGE-Viewer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="https://i.imgur.com/aupydja.png" alt="" /></td>
      <td><img src="https://i.imgur.com/shhrvvq.png" alt="" /></td>
    </tr>
  </tbody>
</table>

<ul>
  <li>Damit Sie alle Dateien im <em>Select Document File</em>-Fenster sehen k√∂nnen, geben Sie einen Stern (<em>) unter *Dateiname</em> ein und best√§tigen die Eingabe mit Enter.
<img src="https://i.imgur.com/lUW13Y2.png" alt="" /></li>
  <li>Das Laden der Bilddateien erfolgt auf gleichem Weg.
<img src="https://i.imgur.com/GN9AT9S.png" alt="" /></li>
</ul>

<p>http://dhd2018.uni-koeln.de/wp-content/uploads/boa-DHd2018-web-ISBN.pdf#page=221</p>
:ET