I"‡<h1 id="praxis-ocr-von-willk√ºrlichen-bildern">Praxis: OCR von willk√ºrlichen Bildern</h1>

<p>Der Fokus von OCR-D ist auf Massendigitalisierung historischer Best√§nde.
Deswegen wird konsequent immer METS verwendet.</p>

<p>Um mit willk√ºrlichen Bildern innerhalb OCR-D zu arbeiten, m√ºssen wir daher METS
erzeugen.</p>

<p>Als Beispiel verwenden wir die <a href="https://github.com/OCR-D/assets/blob/master/data/communist_manifesto/data/OCR-D-IMG/OCR-D-IMG_0015">erste Seite der englischen Ausgabe des Kommunistischen Manifests</a> (Quelle: https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Manifesto_of_the_Communist_Party.djvu/page15-2745px-Manifesto_of_the_Communist_Party.djvu.jpg).</p>

<h2 id="neues-mets-erzeugen">Neues METS erzeugen</h2>

<p>Der <code class="language-plaintext highlighter-rouge">workspace</code> Unterbefehl erlaubt es, neues METS zu initiieren (<code class="language-plaintext highlighter-rouge">init</code>):</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ocrd workspace init communist_manifesto
22:58:38.321 INFO ocrd.resolver - Writing /home/kba/build/github.com/OCR-D/monorepo/slides/2019-03-25-dhd/communist_manifesto/mets.xml
22:58:38.322 INFO ocrd.workspace - Saving mets <span class="s1">'/home/kba/build/github.com/OCR-D/monorepo/slides/2019-03-25-dhd/communist_manifesto/mets.xml'</span>
/home/kba/build/github.com/OCR-D/monorepo/slides/2019-03-25-dhd/communist_manifesto

<span class="nv">$ </span>find communist_manifesto
communist_manifesto
communist_manifesto/mets.xml
</code></pre></div></div>

<h2 id="verzeichnis-f√ºr-bild-anlegen">Verzeichnis f√ºr Bild anlegen</h2>

<p>Per Konvention heisst die Dateigruppe mit dem unkomprimierten Bild innerhalb von OCR-D immer <code class="language-plaintext highlighter-rouge">OCR-D-IMG</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>communist_manifesto
<span class="nv">$ </span><span class="nb">mkdir </span>OCR-D-IMG
</code></pre></div></div>

<h2 id="bild-herunterladen">Bild herunterladen</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="s1">'https://raw.githubusercontent.com/OCR-D/assets/master/data/communist_manifesto/data/OCR-D-IMG/OCR-D-IMG_0015'</span> <span class="o">&gt;</span> OCR-D-IMG/OCR-D-IMG_0015.png
</code></pre></div></div>

<h2 id="bild-zum-mets-hinzuf√ºgen">Bild zum METS hinzuf√ºgen</h2>

<p>Dateien k√∂nnen mit dem <code class="language-plaintext highlighter-rouge">add</code> Unterbefehl von <code class="language-plaintext highlighter-rouge">ocrd workspace</code> hinzugef√ºgt werden.</p>

<p>Daf√ºr sind eine Reihe von Parametern notwendig, die Sie der Hilfe entnehmen k√∂nnen:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ocrd workspace add <span class="nt">--help</span>
Usage: ocrd workspace add <span class="o">[</span>OPTIONS] LOCAL_FILENAME

  Add a file LOCAL_FILENAME to METS <span class="k">in </span>a workspace.

Options:
  <span class="nt">-G</span>, <span class="nt">--file-grp</span> TEXT  fileGrp USE  <span class="o">[</span>required]
  <span class="nt">-i</span>, <span class="nt">--file-id</span> TEXT   ID <span class="k">for </span>the file  <span class="o">[</span>required]
  <span class="nt">-m</span>, <span class="nt">--mimetype</span> TEXT  Media <span class="nb">type </span>of the file  <span class="o">[</span>required]
  <span class="nt">-g</span>, <span class="nt">--page-id</span> TEXT   ID of the physical page
  <span class="nt">--force</span>              If file with ID already exists, replace it
  <span class="nt">--help</span>               Show this message and exit.
</code></pre></div></div>

<p>Wir f√ºgen also die Datei hinzu:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ocrd workspace add <span class="nt">-g</span> P0015 <span class="nt">-G</span> OCR-D-IMG <span class="nt">-i</span> OCR-D-IMG_0015 <span class="nt">-m</span> image/png OCR-D-IMG/OCR-D-IMG_0015.png
</code></pre></div></div>

<p>Und √ºberpr√ºfen ob sie wirklich hinzugef√ºgt wurde:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ocrd workspace find
OCR-D-IMG/OCR-D-IMG_0015
</code></pre></div></div>

<h2 id="eindeutigen-identifier-hinzuf√ºgen">Eindeutigen Identifier hinzuf√ºgen</h2>

<p>Nun setzen wir noch einen eindeutigen Identifier:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ocrd workspace set-id <span class="s1">'1234567890'</span>
</code></pre></div></div>

<h2 id="validieren">Validieren</h2>

<p>Wir k√∂nnen nun √ºberpr√ºfen, ob das Verzeichnis den Anforderungen von OCR-D
gen√ºgt. Dazu verwenden wir den <code class="language-plaintext highlighter-rouge">validate</code> Unterbefehl von <code class="language-plaintext highlighter-rouge">ocrd workspace</code>.
Bei der Validierung √ºberspringen wir die Untersuchung der Aufl√∂sung, da
diese aus technischen Gr√ºnden h√§ufig nicht gegeben ist, was zu Fehlern f√ºhrt, die keine sind.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ocrd workspace validate <span class="nt">--skip</span> pixel_density mets.xml
&lt;report <span class="nv">valid</span><span class="o">=</span><span class="s2">"true"</span><span class="o">&gt;</span>
&lt;/report&gt;
</code></pre></div></div>

<h2 id="fertig">Fertig!</h2>

<p>Das Verzeichnis ist nun in einer Form, dass es mit OCR-D Werkzeugen weiterverarbeitet werden kann.</p>

<p>Im Ergebnis sollte das von Ihnen erstellte Verzeichnis <a href="https://github.com/OCR-D/assets/tree/master/data/communist_manifesto/data">dem Beispieldatensatz im OCR-D/assets Repository</a> entsprechen.</p>
:ET