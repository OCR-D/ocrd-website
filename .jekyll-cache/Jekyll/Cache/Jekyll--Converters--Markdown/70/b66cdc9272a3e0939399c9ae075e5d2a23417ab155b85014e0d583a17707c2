I"Dn<h1 id="command-line-interface-cli">Command Line Interface (CLI)</h1>

<p>All tools provided by MP must be standalone executables, installable into <code class="language-plaintext highlighter-rouge">$PATH</code>.</p>

<p>Those tools intended for run-time data processing (but not necessarily tools for training or deployment) are called <strong>processors</strong>.
Processors must adhere to the following uniform interface, including mandatory and optional parameters (i.e. no more or fewer are permissible).</p>

<p><strong>NOTE:</strong> Command line options cannot be repeated, except those explicitly
marked as <strong>REPEATABLE</strong> (e.g. <code class="language-plaintext highlighter-rouge">-p params.json -p '{"val": 1}'</code> is allowed
because <a href="#-p---parameter-param_json"><code class="language-plaintext highlighter-rouge">-p</code> is repeatable</a>.</p>

<p><strong>NOTE</strong>: Parameters marked <strong>MULTI-VALUE</strong> cannot be repeated but can specify
multiple values, formatted as a single string with comma-separated items (e.g.
<code class="language-plaintext highlighter-rouge">-I group1,group2,group3</code> instead of <code class="language-plaintext highlighter-rouge">-I group1 -I group2 -I group3</code>).</p>

<p><strong>NOTE</strong>: Parameters marked <strong>RANGE</strong> support the numeric range operator <code class="language-plaintext highlighter-rouge">..</code> to
generate all the values between the start and end value by incrementing the numeric
part of the string.</p>

<h2 id="cli-executable-name">CLI executable name</h2>

<p>Every CLI executable’s name must begin with <code class="language-plaintext highlighter-rouge">ocrd-</code>.</p>

<p>Examples:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">ocrd-kraken-binarize</code></li>
  <li><code class="language-plaintext highlighter-rouge">ocrd-tesserocr-recognize</code></li>
</ul>

<h2 id="no-parameters">No parameters</h2>

<p>If <strong>no arguments</strong> are passed to a processor, it must show the <a href="#-h---help"><code class="language-plaintext highlighter-rouge">--help</code>
message</a> message and exit with return code <code class="language-plaintext highlighter-rouge">1</code>.</p>

<h2 id="mandatory-parameters">Mandatory parameters</h2>

<h3 id="-i---input-file-grp-grp"><code class="language-plaintext highlighter-rouge">-I, --input-file-grp GRP</code></h3>

<p><strong>MULTI-VALUE</strong></p>

<p><a href="mets">METS</a> file group(s) used as input.</p>

<p>Input file groups must not be modified.</p>

<h2 id="optional-parameters">Optional parameters</h2>

<h3 id="-o---output-file-grp-grp"><code class="language-plaintext highlighter-rouge">-O, --output-file-grp GRP</code></h3>

<p><strong>MULTI-VALUE</strong></p>

<p><a href="mets">METS</a> file group(s) used as output.</p>

<p>Omit to resort to default output file groups of the processor, or for processors that inherently do not produce output files.</p>

<h3 id="-g---page-id-id"><code class="language-plaintext highlighter-rouge">-g, --page-id ID</code></h3>

<p><strong>MULTI-VALUE</strong> <strong>RANGE</strong></p>

<p>The <code class="language-plaintext highlighter-rouge">mets:div[@TYPE='page']/@ID</code> that contains the <code class="language-plaintext highlighter-rouge">mets:fptr/@FILEID</code> pointers
to files representing a page. Effectively, only those files in the <a href="#-i---input-file-grp-grp">input file
group</a> that are referenced in these
<code class="language-plaintext highlighter-rouge">mets:div[@TYPE="page"]</code> will be processed.</p>

<p>Omit to process all pages.</p>

<h3 id="--overwrite"><code class="language-plaintext highlighter-rouge">--overwrite</code></h3>

<p>Delete files in the output file group(s) before processing.</p>

<p>If <code class="language-plaintext highlighter-rouge">--overwrite</code> is set, but <a href="-g---page-id-id"><code class="language-plaintext highlighter-rouge">--page-id</code></a> is not set, delete
all output file groups set with
<a href="-o---output-file-grp-grp"><code class="language-plaintext highlighter-rouge">--output-file-grp</code></a>, including all files that belong to
those file groups.</p>

<p>If <code class="language-plaintext highlighter-rouge">--overwrite</code> is set and <a href="-g---page-id-id"><code class="language-plaintext highlighter-rouge">--page-id</code></a> is set, delete all files that represent
any of the page IDs given with <a href="-g---page-id-id"><code class="language-plaintext highlighter-rouge">--page-id</code></a> from all output
file groups set with
<a href="-o---output-file-grp-grp"><code class="language-plaintext highlighter-rouge">--output-file-grp</code></a></p>

<p>“File deletion” in the context of <code class="language-plaintext highlighter-rouge">--overwrite</code> means deletion of matching
<code class="language-plaintext highlighter-rouge">mets:file</code> elements from the METS document and all local files these
<code class="language-plaintext highlighter-rouge">mets:file</code> represent.</p>

<p>“Group deletion” in the context of <code class="language-plaintext highlighter-rouge">--overwrite</code> means deletion of the
<code class="language-plaintext highlighter-rouge">mets:fileGrp</code> element from METS, and deletion of all files that belong to this
<code class="language-plaintext highlighter-rouge">mets:fileGrp</code> element.</p>

<h3 id="-p---parameter-param_json"><code class="language-plaintext highlighter-rouge">-p, --parameter PARAM_JSON</code></h3>

<p><strong>REPEATABLE</strong></p>

<p>URL of parameter file in <a href="https://json.org/">JSON format</a> corresponding to the
<code class="language-plaintext highlighter-rouge">parameters</code> section of the processor’s <a href="ocrd_tool">ocrd-tool metadata</a>. If
that file is not readable and <code class="language-plaintext highlighter-rouge">PARAM_JSON</code> begins with <code class="language-plaintext highlighter-rouge">{</code> (opening brace), try
to parse <code class="language-plaintext highlighter-rouge">PARAM_JSON</code> as JSON. If that also fails, throw an exception.</p>

<p>When parsing JSON, all lines matching the regular expression <code class="language-plaintext highlighter-rouge">^\s*#.*</code>, i.e.
lines whose first non-whitespace character is <code class="language-plaintext highlighter-rouge">#</code>, are to be disregarded as
comments.</p>

<p>When <code class="language-plaintext highlighter-rouge">-p</code> is repeated, the parsed values should be shallowly merged from right
to left.</p>

<p><code class="language-plaintext highlighter-rouge">-p</code> can be omitted to use default parameters only, or for processors without
any parameters.</p>

<h3 id="-p---parameter-override-key-val"><code class="language-plaintext highlighter-rouge">-P, --parameter-override KEY VAL</code></h3>

<p><strong>REPEATABLE</strong></p>

<p>Companion to <a href="#-p--parameter-PARAM_JSON"><code class="language-plaintext highlighter-rouge">-p, --parameter PARAM_JSON</code></a> that allows overriding <code class="language-plaintext highlighter-rouge">KEY</code> in the parameter JSON object with <code class="language-plaintext highlighter-rouge">VAL</code>. All <code class="language-plaintext highlighter-rouge">P</code> key-value-pairs are applied to the parameter JSON in the order they are given on the command line.</p>

<p>Syntactically, <code class="language-plaintext highlighter-rouge">VAL</code> SHOULD be a valid JSON datatype:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">"a string"</code> - a string should be enclosed with double quotes, contained double quotes backslash-escaped</li>
  <li><code class="language-plaintext highlighter-rouge">123</code> - an int</li>
  <li><code class="language-plaintext highlighter-rouge">123.45</code> - a float</li>
  <li><code class="language-plaintext highlighter-rouge">true</code>, <code class="language-plaintext highlighter-rouge">false</code> - a boolean</li>
  <li><code class="language-plaintext highlighter-rouge">[1, "two", 3.33]</code> - an array</li>
  <li><code class="language-plaintext highlighter-rouge">{"foo": 42}</code> - an object</li>
</ul>

<p>As a convenience, if <code class="language-plaintext highlighter-rouge">VAL</code> fails to parse as a valid JSON type, it is
interpreted as a string (<code class="language-plaintext highlighter-rouge">a string</code> is equivalent to <code class="language-plaintext highlighter-rouge">"a string"</code>, but <code class="language-plaintext highlighter-rouge">true</code>
will be parsed as the boolean value <code class="language-plaintext highlighter-rouge">true</code>, not the string <code class="language-plaintext highlighter-rouge">"true"</code>).</p>

<h3 id="-m---mets-mets_in"><code class="language-plaintext highlighter-rouge">-m, --mets METS_IN</code></h3>

<p>Input <a href="mets">METS</a> URL. Default: <code class="language-plaintext highlighter-rouge">mets.xml</code></p>

<h3 id="-w---working-dir-dir"><code class="language-plaintext highlighter-rouge">-w, --working-dir DIR</code></h3>

<p>Working Directory. Default: current working directory.</p>

<h3 id="-l---log-level-loglevel"><code class="language-plaintext highlighter-rouge">-l, --log-level LOGLEVEL</code></h3>

<p>Set the global maximum verbosity level. More verbose log entries will be
ignored. (One of <code class="language-plaintext highlighter-rouge">OFF</code>, <code class="language-plaintext highlighter-rouge">ERROR</code>, <code class="language-plaintext highlighter-rouge">WARN</code>, <code class="language-plaintext highlighter-rouge">INFO</code> (default), <code class="language-plaintext highlighter-rouge">DEBUG</code>, <code class="language-plaintext highlighter-rouge">TRACE</code>).</p>

<p><strong>NOTE:</strong> Setting the log level via <code class="language-plaintext highlighter-rouge">--log-level</code> parameter should override any
other implementation-specific means of logging configuration. For example, with
<code class="language-plaintext highlighter-rouge">--log-level TRACE</code> no log messages should be filtered globally, whereas
<code class="language-plaintext highlighter-rouge">--log-level ERROR</code>, only errors should be output globally.</p>

<h3 id="-j---dump-json"><code class="language-plaintext highlighter-rouge">-J, --dump-json</code></h3>

<p>Instead of processing METS, output the <a href="ocrd_tool">ocrd-tool</a> description for
this executable, in particular its parameters.</p>

<h3 id="-c---show-resource-filename"><code class="language-plaintext highlighter-rouge">-C, --show-resource FILENAME</code></h3>

<p>Print the contents of processor resource <code class="language-plaintext highlighter-rouge">FILENAME</code>. Look up the resp. absolute filename according to the <a href="ocrd_tool#file-parameter">file parameter lookup rules</a>.</p>

<h3 id="-l---list-resources"><code class="language-plaintext highlighter-rouge">-L, --list-resources</code></h3>

<p>List the names of <a href="#processor-resources">processor resources</a> in all of the paths defined by.the <a href="ocrd_tool#file-parameter">file parameter lookup rules</a>, one name per line.</p>

<h3 id="-h---help"><code class="language-plaintext highlighter-rouge">-h, --help</code></h3>

<p>Print a concise description of the tool, the command line options and
parameters it accepts as well as the input/output groups. This information should
be generated from <a href="ocrd_tool"><code class="language-plaintext highlighter-rouge">ocrd-tool.json</code></a> as much as possible.</p>

<h2 id="return-value">Return value</h2>

<p>Successful execution should signal <code class="language-plaintext highlighter-rouge">0</code>. Any non-zero return value is considered a failure.</p>

<h2 id="logging">Logging</h2>

<p>Data printed to <code class="language-plaintext highlighter-rouge">STDERR</code> is captured linewise and stored as log data.</p>

<p>Processors must adjust logging verbosity according to the <a href="#-l---log-level-loglevel"><code class="language-plaintext highlighter-rouge">--log-level</code> parameter</a>.</p>

<p>The log messages must have the format <code class="language-plaintext highlighter-rouge">TIME LEVEL LOGGERNAME - MESSAGE\n</code>, where</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">TIME</code> is the current time in the format <code class="language-plaintext highlighter-rouge">HH:MM:ss.mmm</code>, e.g. <code class="language-plaintext highlighter-rouge">07:05:31.007</code></li>
  <li><code class="language-plaintext highlighter-rouge">LEVEL</code> is the log level of the message, in uppercase, e.g. <code class="language-plaintext highlighter-rouge">INFO</code></li>
  <li><code class="language-plaintext highlighter-rouge">LOGGERNAME</code> is the name of the logging component, such as the class name. Segments of <code class="language-plaintext highlighter-rouge">LOGGERNAME</code> should be separated by dot <code class="language-plaintext highlighter-rouge">.</code>, e.g. <code class="language-plaintext highlighter-rouge">ocrd.fancy_tool.analyze</code></li>
  <li><code class="language-plaintext highlighter-rouge">MESSAGE</code> is the message to log, should not contain new lines.</li>
  <li><code class="language-plaintext highlighter-rouge">\n</code> is ASCII char <code class="language-plaintext highlighter-rouge">0x0a</code> (newline)</li>
</ul>

<h2 id="processor-resources">Processor resources</h2>

<p>Parameters that reference files can be resolved from relative to absolute
filename by following the <a href="ocrd_tool#file-parameters">conventions laid out in the <code class="language-plaintext highlighter-rouge">ocrd_tool</code>
spec</a>. These files, either bundled by the processor
developer or put in place by the user, are called <em>processor resources</em>. The
<em>processor resources</em> of a processor can be listed with the <code class="language-plaintext highlighter-rouge">-L/--list-resources</code>
option and individual <em>processor resources</em> can be retrieved with the
<code class="language-plaintext highlighter-rouge">-C/--show-resource</code> option. Since <em>processor resources</em> use the same mechanism
as file parameters, they can be used</p>

<ul>
  <li>as the argument to the <code class="language-plaintext highlighter-rouge">-p/--parameter</code> option (i.e. a <strong>preset</strong> file), and</li>
  <li>as the value of a file-type parameter (e.g. a <strong>model</strong> file)</li>
</ul>

<p>and the processor must resolve them to absolute paths <a href="ocrd_tool#file-parameters">according to the rules
for file parameters</a>.</p>

<h2 id="urlfile-convention">URL/file convention</h2>

<p>Whenever a URL is expected, it should be possible to use a local file path
instead and have the implementation interpret as a <code class="language-plaintext highlighter-rouge">file://</code> URL on the fly.</p>

<p>Implementations should adhere to this algorithm when resolving a URL <code class="language-plaintext highlighter-rouge">u</code>:</p>

<ol>
  <li>If <code class="language-plaintext highlighter-rouge">u</code> contains the string <code class="language-plaintext highlighter-rouge">://</code>: Do not modify.</li>
  <li>If <code class="language-plaintext highlighter-rouge">u</code> is an absolute path according to the mechanics of the underlying file system: Prepend <code class="language-plaintext highlighter-rouge">file://</code> to <code class="language-plaintext highlighter-rouge">u</code>.</li>
  <li>Otherwise: Resolve <code class="language-plaintext highlighter-rouge">u</code> as a path relative to the current working directory, prepend <code class="language-plaintext highlighter-rouge">file://</code> to <code class="language-plaintext highlighter-rouge">u</code>.</li>
</ol>

<p><strong>NOTE:</strong> This convention is limited to the CLI for convenience of users and
developers. In METS and PAGE documents, URLs must be strictly valid and
resolvable by common software agents as-is.</p>

<h2 id="example">Example</h2>

<p>This is how the CLI provided by the MP should work:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> ocrd-kraken-binarize <span class="se">\</span>
    <span class="nt">--mets</span> <span class="s2">"file:///path/to/file/mets.xml"</span> <span class="se">\</span>
    <span class="nt">--working-dir</span> <span class="s2">"file:///path/to/workingDir/"</span> <span class="se">\</span>
    <span class="nt">--parameters</span> <span class="s2">"file:///path/to/file/parameters.json"</span> <span class="se">\</span>
    <span class="nt">--page-id</span> PHYS_0001,PHYS_0002,PHYS_0003 <span class="se">\</span>
    <span class="nt">--input-file-grp</span> OCR-D-IMG
    <span class="nt">--output-file-grp</span> OCR-D-IMG-BIN-KRAKEN
</code></pre></div></div>

<p>And this is how it will be called with the <code class="language-plaintext highlighter-rouge">ocrd process</code> CLI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> ocrd process <span class="se">\</span>
    <span class="s1">'kraken-binarize -I OCR-D-IMG -O OCR-D-IMG-BIN-KRAKEN -p /path/to/file/parameters.json'</span>
    <span class="nt">-m</span> <span class="s2">"file:///path/to/file/mets.xml"</span> <span class="se">\</span>
    <span class="nt">-g</span> PHYS_0001,PHYS_0002,PHYS_0003

    preprocessing/binarization/kraken-binarize
</code></pre></div></div>

<h3 id="mets-input">METS input</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mets:mets&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
  <span class="nt">&lt;mets:structMap</span> <span class="na">TYPE=</span><span class="s">"PHYSICAL"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mets:div</span> <span class="na">ID=</span><span class="s">"PHYS_0000"</span> <span class="na">TYPE=</span><span class="s">"physSequence"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;mets:div</span> <span class="na">TYPE=</span><span class="s">"page"</span> <span class="na">ID=</span><span class="s">"PHYS_0001"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:fptr</span> <span class="na">FILEID=</span><span class="s">"OCR-D-IMG_0001"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:div&gt;</span>
      <span class="nt">&lt;mets:div</span> <span class="na">TYPE=</span><span class="s">"page"</span> <span class="na">ID=</span><span class="s">"PHYS_0002"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:fptr</span> <span class="na">FILEID=</span><span class="s">"OCR-D-IMG_0002"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:div&gt;</span>
      <span class="nt">&lt;mets:div</span> <span class="na">TYPE=</span><span class="s">"page"</span> <span class="na">ID=</span><span class="s">"PHYS_0003"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:fptr</span> <span class="na">FILEID=</span><span class="s">"OCR-D-IMG_0003"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:div&gt;</span>
    <span class="nt">&lt;/mets:div&gt;</span>
  <span class="nt">&lt;/mets:structMap&gt;</span>

  <span class="nt">&lt;mets:fileSec&gt;</span>

    <span class="nt">&lt;mets:fileGrp</span> <span class="na">USE=</span><span class="s">"OCR-D-IMG"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0001"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tiff"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000001.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0002"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tiff"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000002.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0003"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tiff"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000003.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
    <span class="nt">&lt;/mets:fileGrp&gt;</span>

  <span class="nt">&lt;/mets:fileSec&gt;</span>
<span class="nt">&lt;/mets:mets&gt;</span>
</code></pre></div></div>

<h3 id="input-json-parameter-file">Input JSON parameter file</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"threshold"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w">
    </span><span class="nl">"zoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">],</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="mets-output">METS output</h3>

<p>This is the METS file after being run through the MP CLI:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mets:mets&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
  <span class="nt">&lt;mets:structMap</span> <span class="na">TYPE=</span><span class="s">"PHYSICAL"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;mets:div</span> <span class="na">DMDID=</span><span class="s">"DMDPHYS_0000"</span> <span class="na">ID=</span><span class="s">"PHYS_0000"</span> <span class="na">TYPE=</span><span class="s">"physSequence"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;mets:div</span> <span class="na">TYPE=</span><span class="s">"page"</span> <span class="na">ID=</span><span class="s">"PHYS_0001"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:fptr</span> <span class="na">FILEID=</span><span class="s">"OCR-D-IMG_0001"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;mets:fptr</span> <span class="na">FILEID=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN_0001"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:div&gt;</span>
      <span class="nt">&lt;mets:div</span> <span class="na">TYPE=</span><span class="s">"page"</span> <span class="na">ID=</span><span class="s">"PHYS_0002"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:fptr</span> <span class="na">FILEID=</span><span class="s">"OCR-D-IMG_0002"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;mets:fptr</span> <span class="na">FILEID=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN_0002"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:div&gt;</span>
      <span class="nt">&lt;mets:div</span> <span class="na">TYPE=</span><span class="s">"page"</span> <span class="na">ID=</span><span class="s">"PHYS_0003"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:fptr</span> <span class="na">FILEID=</span><span class="s">"OCR-D-IMG_0003"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;mets:fptr</span> <span class="na">FILEID=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN_0003"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:div&gt;</span>
    <span class="nt">&lt;/mets:div&gt;</span>
  <span class="nt">&lt;/mets:structMap&gt;</span>

  <span class="nt">&lt;mets:fileSec&gt;</span>

    <span class="nt">&lt;mets:fileGrp</span> <span class="na">USE=</span><span class="s">"OCR-D-IMG"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0001"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tiff"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000001.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0002"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tiff"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000002.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0003"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tiff"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000003.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
    <span class="nt">&lt;/mets:fileGrp&gt;</span>

    <span class="nt">&lt;mets:fileGrp</span> <span class="na">USE=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN_0001"</span> <span class="na">MIMETYPE=</span><span class="s">"image/png"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"file:///tmp/ocrd-workspace-ABC123/0001.png"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN_0002"</span> <span class="na">MIMETYPE=</span><span class="s">"image/png"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"file:///tmp/ocrd-workspace-ABC123/0002.png"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN_0003"</span> <span class="na">MIMETYPE=</span><span class="s">"image/png"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"file:///tmp/ocrd-workspace-ABC123/0003.png"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
    <span class="nt">&lt;/mets:fileGrp&gt;</span>

  <span class="nt">&lt;/mets:fileSec&gt;</span>
<span class="nt">&lt;/mets:mets&gt;</span>
</code></pre></div></div>
:ET